 Begin reading netlist ( ../libs/mw_lib/tmax/libs.v.gz )...
 End parsing Verilog file ../libs/mw_lib/tmax/libs.v.gz with 0 errors.
 End reading netlist: #modules=1005, top=pv0a, #lines=10922, CPU_time=0.03 sec, Memory=2MB
 Begin reading netlist ( ../syn/mapped_scan/async_fifo.v )...
 End parsing Verilog file ../syn/mapped_scan/async_fifo.v with 0 errors.
 End reading netlist: #modules=26, top=async_fifo, #lines=1600, CPU_time=0.01 sec, Memory=1MB
#------------------------------------------------------------------------
# 02 _ Build ATPG Design Model
#------------------------------------------------------------------------
run_build_model  $top_design
 ------------------------------------------------------------------------------
 Begin build model for topcut = async_fifo ...
 ------------------------------------------------------------------------------
 There were 2966 primitives and 2 faultable pins removed during model optimizations
 Warning: Rule B7 (undriven module output pin) was violated 16 times.
 Warning: Rule B8 (unconnected module input pin) was violated 10 times.
 Warning: Rule B9 (undriven module internal net) was violated 12 times.
 Warning: Rule B10 (unconnected module internal net) was violated 34 times.
 End build model: #primitives=1607, CPU_time=0.02 sec, Memory=1MB
 ------------------------------------------------------------------------------
 Begin learning analyses...
 End learning analyses, total learning CPU time=0.02 sec.
 ------------------------------------------------------------------------------
report_modules -summary >  ./reports/${occ_mode}/${fault}/02_build.rpt
report_modules -errors  >> ./reports/${occ_mode}/${fault}/02_build.rpt

Reading SDC version 2.1...


Summary of unsupported constraints:
 Information: Ignored 1 unsupported 'set_units' constraint. (SDC-4)

 Information: Ignored 4 unsupported 'set_clock_transition' constraints. (SDC-4)

 Information: Ignored 1 unsupported 'set_operating_conditions' constraint. (SDC-4)

 Information: Ignored 1 unsupported 'get_libs' constraint. (SDC-4)

 End read_sdc: #false_paths:4 #multicycle paths:0 #disable_timing:0 #clk_groups:1
               #clks:2 #generated clks:0 #Case Stmt:9
 ------------------------------------------------------------------------------
 Begin scan design rules checking...
 ------------------------------------------------------------------------------
 Begin reading test protocol file ./dftc_protocols/async_fifo_TM1.spf...
 End parsing STIL file ./dftc_protocols/async_fifo_TM1.spf with 0 errors.
 Test protocol file reading completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Warning: Unconstrained reference clock wclk is now constrained to its off state. (M559)
 Warning: Unconstrained reference clock rclk is now constrained to its off state. (M559)
 Warning: Unconstrained reference clock ate_wclk is now constrained to its off state. (M559)
 Warning: Unconstrained reference clock ate_rclk is now constrained to its off state. (M559)
 Begin simulating test protocol procedures...
 Nonscan cell constant value results: #constant0 = 2, #constant1 = 0
 Nonscan cell load value results    : #load0 = 24, #load1 = 2
 Test protocol simulation completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin scan chain operation checking...
 Chain 1 successfully traced with 8 scan_cells.
 Chain 2 successfully traced with 8 scan_cells.
 Chain 3 successfully traced with 153 scan_cells.
 Chain 4 successfully traced with 24 scan_cells.
 Warning: Rule S19 (nonscan cell disturb) was violated 23 times.
 Scan chain operation checking completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin clock rules checking...
 Warning: Rule C3 (no latch transparency when clocks off) was violated 1 times.
 Warning: Rule C16 (nonscan cell port unable to capture) was violated 22 times.
 Clock rules checking completed, CPU time=0.00 sec.
 Clock grouping results: #pairs=0, #groups=0, #serial_pairs=0, #disturbed_pairs=1, CPU time=0.00 sec.
 Begin PLL clock rules checking...
 PLL clock rules checking completed, CPU time=0.01 sec.
 ------------------------------------------------------------------------------
 Begin nonscan rules checking...
 Nonscan cell summary: #DFF=22  #DLAT=6  #RAM_outs=0  tla_usage_type=hot_clock_tla
 Nonscan behavior:  #C0=2  #TLA=3  #L0=20  #L1=2  #LS=1
 Nonscan rules checking completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin DRC dependent learning...
 Fast-sequential depth results: control=1(1368), observe=0(0), detect=0(0), CPU time=0.00 sec
 DRC dependent learning completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 DRC Summary Report
 ------------------------------------------------------------------------------
 Warning: Rule S19 (nonscan cell disturb) was violated 23 times.
 Warning: Rule C3 (no latch transparency when clocks off) was violated 1 times.
 Warning: Rule C16 (nonscan cell port unable to capture) was violated 22 times.
 There were 46 violations that occurred during DRC process.
 Design rules checking was successful, total CPU time=0.01 sec.
 ------------------------------------------------------------------------------
 reading slack data file ./pt/slacks/pll_based/async_fifo_TM1.slack.
 354 faults were added to nofault list in module async_fifo_SCCOMP_DECOMPRESSOR.
 100 faults were added to nofault list in module async_fifo_SCCOMP_COMPRESSOR.
 5654 faults were added to fault list.
 The max tmgn for small delay defect faults has been set to 2.1597
 
 ATPG performed for transition fault model using internal pattern source.
 ----------------------------------------------------------
 #patterns     #faults     #ATPG faults  test      process
 stored     detect/active  red/au/abort  coverage  CPU time
 ---------  -------------  ------------  --------  --------
 Begin deterministic ATPG: #uncollapsed_faults=3554, abort_limit=10...
 Optimized clock launch transition fault ATPG is enabled.
 1 out of 6 timing exceptions are optimized.
 32           1020    980         0/8/1    38.02%      0.03
 Local redundancy analysis results: #redundant_faults=0, CPU_time=0.00 sec
 63            389    589        0/10/1    44.37%      0.12
 94            178    394        0/27/4    47.30%      0.18
 121            66    278        0/71/8    48.42%      0.23
 147            40    169      0/138/21    49.11%      0.28
 Untestable analysis results: #faults=60, #UR_faults=0, #AU_faults=33, #aborted=21, #inferred=0/0, time=0.01 sec
 153             9    122      0/139/41    49.22%      0.31
 
   Uncollapsed Transition Fault Summary Report
 -----------------------------------------------
 fault class                     code   #faults
 ------------------------------  ----  ---------
 Detected                         DT       2773
   detected_by_simulation         DS      (1082)
   detected_by_implication        DI       (992)
   transition-partially_detected   TP       (699)
 Possibly detected                PT          0
 Undetectable                     UD         20
   undetectable-tied              UT        (18)
   undetectable-redundant         UR         (2)
 ATPG untestable                  AU       2818
   atpg_untestable-not_detected   AN      (2818)
 Not detected                     ND         43
   not-observed                   NO        (43)
 -----------------------------------------------
 total faults                              5654
 test coverage                            49.22%
 -----------------------------------------------
            Pattern Summary Report
 -----------------------------------------------
 #internal patterns                         153
     #basic_scan patterns                     1
     #fast_sequential patterns              152
 -----------------------------------------------
            CPU Usage Summary Report
 -----------------------------------------------
 Total CPU time                            0.31
 -----------------------------------------------
 Write faults completed: 5654 faults were written into file "./faults/pll_based/TM1/trans_sdd.flt".
#-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-#
#									#
#		*** common script for all faults ***			#
#		1) generate required reports				#
#		2) write test patterns					#
#		3) write testbenches for pattern validation		#
#		4) write images for post testing diagnosis		#
#									#
#-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-#
#------------------------------------------------------------------------
# 01 _ Generate ATPG Summaries and Reports
#------------------------------------------------------------------------
if { ! [file exist ./reports/${occ_mode}/${fault}/${mode}] } 	{ exec mkdir -p ./reports/${occ_mode}/${fault}/${mode} }
# reports setting
set_faults -pt_credit 0 -au_credit 0
set_faults -summary verbose -fault_coverage -report collapsed
 Warning: Unused gate deletion affects fault coverage calculation. (M245)
set_patterns -histogram_summary
set_faults -fault_coverage
 Warning: Unused gate deletion affects fault coverage calculation. (M245)
# report coverage
report_summaries >  ./reports/${occ_mode}/${fault}/${mode}/01_coverage.rpt
# report drc violations
report_violations -all >  ./reports/${occ_mode}/${fault}/${mode}/02_drc_violations.rpt
# report not detected faults
report_faults -class nd >  ./reports/${occ_mode}/${fault}/${mode}/03_nd_faults.rpt
# report_clocks
report_clocks -intclocks  >  ./reports/${occ_mode}/${fault}/${mode}/clocks.rpt
report_clocks -pllclocks >>  ./reports/${occ_mode}/${fault}/${mode}/clocks.rpt
report_clocks -matrix    >>  ./reports/${occ_mode}/${fault}/${mode}/clocks.rpt
#------------------------------------------------------------------------
# 02 _ Write Image File for Later Post_Testing Diagnosis
#------------------------------------------------------------------------
if { ! [file exist ./imgs/${occ_mode}/${fault}] } 	{ exec mkdir -p ./imgs/${occ_mode}/${fault} }
write_image ./imgs/${occ_mode}/${fault}/${top_design}_${mode}.img.gz 	-compress gzip -replace -violations 
 End write image: #bytes=146613, CPU time=0.05 sec.
#------------------------------------------------------------------------
# 03 _ Write ATPG Patterns
#------------------------------------------------------------------------
if { ! [file exist ./patterns/${occ_mode}/${fault}/gzip] } { exec mkdir -p ./patterns/${occ_mode}/${fault}/gzip }
if { ! [file exist ./patterns/${occ_mode}/${fault}/stil] } { exec mkdir -p ./patterns/${occ_mode}/${fault}/stil }
write_patterns ./patterns/${occ_mode}/${fault}/stil/${top_design}_${mode}.stil  	-format stil -unified_stil_flow -replace
 Patterns written reference 1534 V statements, generating 24942 test cycles
 End writing file 'async_fifo_TM1.stil' with 153 patterns, File_size = 232966, CPU_time = 0.0 sec.
write_patterns ./patterns/${occ_mode}/${fault}/gzip/${top_design}_${mode}_pats.gz 	-format binary -compress gzip -replace
 End writing file 'async_fifo_TM1_pats.gz' with 153 patterns, File_size = 8997, CPU_time = 0.0 sec.
#------------------------------------------------------------------------
# 04 _ Save simulation testbench
#------------------------------------------------------------------------
if {! [file exist ./max_sim/logs]} {exec mkdir -p ./max_sim/logs }
if {! [file exist ./max_sim/parallel/${occ_mode}/${fault}/${mode}]} 	{exec mkdir -p ./max_sim/parallel/${occ_mode}/${fault}/${mode} }
if {! [file exist ./max_sim/serial/${occ_mode}/${fault}/${mode}]} 	{exec mkdir -p ./max_sim/serial/${occ_mode}/${fault}/${mode} }
# parallel simulation testbench 
write_testbench -input ./patterns/${occ_mode}/${fault}/stil/${top_design}_${mode}.stil 	-output ./max_sim/parallel/${occ_mode}/${fault}/${mode}/pat_parallel_tb 	-parameter {-parallel -replace -log ./max_sim/logs/pat_parallel_tb.log} 
 Executing 'stil2verilog'...
# parallel simulation testbench with back annotated delay
write_testbench -input ./patterns/${occ_mode}/${fault}/stil/${top_design}_${mode}.stil 	-output ./max_sim/serial/${occ_mode}/${fault}/${mode}/pat_serial_tb 	-parameter {-serial -replace 	-log ./max_sim/logs/pat_serial_tb.log -sdf_file ../pt/sdf/async_fifo.sdf} 
 Executing 'stil2verilog'...
 Warning: Internal pattern set is now deleted. (M133)
 Warning: Current simulation model is now deleted. (M39)
#-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-#
#									#
#		*** common script for all faults ***			#
#		1) read design and simualtion library			#
#		2) build test model 					#
#									#
#-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-#
#------------------------------------------------------------------------
# 00 _ Save TetraMax Transcript to Log File
#------------------------------------------------------------------------
if { $mode == {TM1} } { 

if { ! [file exist ./logs/${occ_mode}/${fault}] } 	{ exec mkdir -p ./logs/${occ_mode}/${fault} }

set_messages -log ./logs/${occ_mode}/${fault}/tmax_atpg.log -replace  

#------------------------------------------------------------------------
# 01 _ Read Libraries and Design
#------------------------------------------------------------------------
if { ! [file exist ./reports/${occ_mode}/${fault}] } 	{ exec mkdir -p ./reports/${occ_mode}/${fault} }

read_netlist ../libs/mw_lib/tmax/libs.v.gz
read_netlist ../syn/mapped_scan/${top_design}.v

report_modules -undefined > ./reports/${occ_mode}/${fault}/01_read.rpt

}
#------------------------------------------------------------------------
# 02 _ Build ATPG Design Model
#------------------------------------------------------------------------
run_build_model  $top_design
 ------------------------------------------------------------------------------
 Begin build model for topcut = async_fifo ...
 ------------------------------------------------------------------------------
 There were 2966 primitives and 2 faultable pins removed during model optimizations
 Warning: Rule B7 (undriven module output pin) was violated 16 times.
 Warning: Rule B8 (unconnected module input pin) was violated 10 times.
 Warning: Rule B9 (undriven module internal net) was violated 12 times.
 Warning: Rule B10 (unconnected module internal net) was violated 34 times.
 End build model: #primitives=1607, CPU_time=0.02 sec, Memory=1MB
 ------------------------------------------------------------------------------
 Begin learning analyses...
 End learning analyses, total learning CPU time=0.01 sec.
 ------------------------------------------------------------------------------
report_modules -summary >  ./reports/${occ_mode}/${fault}/02_build.rpt
report_modules -errors  >> ./reports/${occ_mode}/${fault}/02_build.rpt

Reading SDC version 2.1...


Summary of unsupported constraints:
 Information: Ignored 1 unsupported 'set_units' constraint. (SDC-4)

 Information: Ignored 4 unsupported 'set_clock_transition' constraints. (SDC-4)

 Information: Ignored 1 unsupported 'set_operating_conditions' constraint. (SDC-4)

 Information: Ignored 1 unsupported 'get_libs' constraint. (SDC-4)

 End read_sdc: #false_paths:4 #multicycle paths:0 #disable_timing:0 #clk_groups:1
               #clks:2 #generated clks:0 #Case Stmt:9
 ------------------------------------------------------------------------------
 Begin scan design rules checking...
 ------------------------------------------------------------------------------
 Begin reading test protocol file ./dftc_protocols/async_fifo_TM2.spf...
 End parsing STIL file ./dftc_protocols/async_fifo_TM2.spf with 0 errors.
 Test protocol file reading completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Warning: Unconstrained reference clock wclk is now constrained to its off state. (M559)
 Warning: Unconstrained reference clock rclk is now constrained to its off state. (M559)
 Warning: Unconstrained reference clock ate_wclk is now constrained to its off state. (M559)
 Warning: Unconstrained reference clock ate_rclk is now constrained to its off state. (M559)
 Begin simulating test protocol procedures...
 Nonscan cell constant value results: #constant0 = 2, #constant1 = 0
 Nonscan cell load value results    : #load0 = 24, #load1 = 2
 Test protocol simulation completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin scan chain operation checking...
 Chain 1 successfully traced with 8 scan_cells.
 Chain 2 successfully traced with 8 scan_cells.
 Chain 3 successfully traced with 153 scan_cells.
 Chain 4 successfully traced with 24 scan_cells.
 Warning: Rule S19 (nonscan cell disturb) was violated 23 times.
 Scan chain operation checking completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin clock rules checking...
 Warning: Rule C3 (no latch transparency when clocks off) was violated 1 times.
 Warning: Rule C16 (nonscan cell port unable to capture) was violated 22 times.
 Clock rules checking completed, CPU time=0.00 sec.
 Clock grouping results: #pairs=0, #groups=0, #serial_pairs=0, #disturbed_pairs=1, CPU time=0.00 sec.
 Begin PLL clock rules checking...
 PLL clock rules checking completed, CPU time=0.01 sec.
 ------------------------------------------------------------------------------
 Begin nonscan rules checking...
 Nonscan cell summary: #DFF=22  #DLAT=6  #RAM_outs=0  tla_usage_type=hot_clock_tla
 Nonscan behavior:  #C0=2  #TLA=3  #L0=20  #L1=2  #LS=1
 Nonscan rules checking completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin DRC dependent learning...
 Fast-sequential depth results: control=1(1368), observe=0(0), detect=0(0), CPU time=0.00 sec
 DRC dependent learning completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 DRC Summary Report
 ------------------------------------------------------------------------------
 Warning: Rule S19 (nonscan cell disturb) was violated 23 times.
 Warning: Rule C3 (no latch transparency when clocks off) was violated 1 times.
 Warning: Rule C16 (nonscan cell port unable to capture) was violated 22 times.
 There were 46 violations that occurred during DRC process.
 Design rules checking was successful, total CPU time=0.01 sec.
 ------------------------------------------------------------------------------
 reading slack data file ./pt/slacks/pll_based/async_fifo_TM2.slack.
 354 faults were added to nofault list in module async_fifo_SCCOMP_DECOMPRESSOR.
 100 faults were added to nofault list in module async_fifo_SCCOMP_COMPRESSOR.
 4574 faults were added to fault list.
 The max tmgn for small delay defect faults has been set to 2.2098
 
 ATPG performed for transition fault model using internal pattern source.
 ----------------------------------------------------------
 #patterns     #faults     #ATPG faults  test      process
 stored     detect/active  red/au/abort  coverage  CPU time
 ---------  -------------  ------------  --------  --------
 Begin deterministic ATPG: #collapsed_faults=2870, abort_limit=10...
 Optimized clock launch transition fault ATPG is enabled.
 1 out of 6 timing exceptions are optimized.
 31            702    846        0/10/1    35.81%      0.05
 Local redundancy analysis results: #redundant_faults=0, CPU_time=0.01 sec
 62            362    478        0/16/6    42.84%      0.13
 93            130    324       0/40/11    45.17%      0.21
 123            74    226       0/64/14    46.75%      0.25
 147            35     96      0/159/28    47.50%      0.31
 Untestable analysis results: #faults=29, #UR_faults=0, #AU_faults=17, #aborted=10, #inferred=0/0, time=0.01 sec
 149             2     77      0/159/38    47.54%      0.33
 
    Collapsed Transition Fault Summary Report
 -----------------------------------------------
 fault class                     code   #faults
 ------------------------------  ----  ---------
 Detected                         DT       2165
   detected_by_simulation         DS       (799)
   detected_by_implication        DI       (820)
   transition-partially_detected   TP       (546)
 Possibly detected                PT          0
 Undetectable                     UD         20
   undetectable-tied              UT        (18)
   undetectable-redundant         UR         (2)
 ATPG untestable                  AU       2352
   atpg_untestable-not_detected   AN      (2352)
 Not detected                     ND         37
   not-observed                   NO        (37)
 -----------------------------------------------
 total faults                              4574
 test coverage                            47.54%
 fault coverage                           47.33%
 -----------------------------------------------
            Pattern Summary Report
 -----------------------------------------------
 #internal patterns                         149
     #basic_scan patterns                     1
     #fast_sequential patterns              148
 -----------------------------------------------
            CPU Usage Summary Report
 -----------------------------------------------
 Total CPU time                            0.33
 -----------------------------------------------
 Write faults completed: 4574 faults were written into file "./faults/pll_based/TM2/trans_sdd.flt".
#-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-#
#									#
#		*** common script for all faults ***			#
#		1) generate required reports				#
#		2) write test patterns					#
#		3) write testbenches for pattern validation		#
#		4) write images for post testing diagnosis		#
#									#
#-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-#
#------------------------------------------------------------------------
# 01 _ Generate ATPG Summaries and Reports
#------------------------------------------------------------------------
if { ! [file exist ./reports/${occ_mode}/${fault}/${mode}] } 	{ exec mkdir -p ./reports/${occ_mode}/${fault}/${mode} }
# reports setting
set_faults -pt_credit 0 -au_credit 0
set_faults -summary verbose -fault_coverage -report collapsed
 Warning: Unused gate deletion affects fault coverage calculation. (M245)
set_patterns -histogram_summary
set_faults -fault_coverage
 Warning: Unused gate deletion affects fault coverage calculation. (M245)
# report coverage
report_summaries >  ./reports/${occ_mode}/${fault}/${mode}/01_coverage.rpt
# report drc violations
report_violations -all >  ./reports/${occ_mode}/${fault}/${mode}/02_drc_violations.rpt
# report not detected faults
report_faults -class nd >  ./reports/${occ_mode}/${fault}/${mode}/03_nd_faults.rpt
# report_clocks
report_clocks -intclocks  >  ./reports/${occ_mode}/${fault}/${mode}/clocks.rpt
report_clocks -pllclocks >>  ./reports/${occ_mode}/${fault}/${mode}/clocks.rpt
report_clocks -matrix    >>  ./reports/${occ_mode}/${fault}/${mode}/clocks.rpt
#------------------------------------------------------------------------
# 02 _ Write Image File for Later Post_Testing Diagnosis
#------------------------------------------------------------------------
if { ! [file exist ./imgs/${occ_mode}/${fault}] } 	{ exec mkdir -p ./imgs/${occ_mode}/${fault} }
write_image ./imgs/${occ_mode}/${fault}/${top_design}_${mode}.img.gz 	-compress gzip -replace -violations 
 End write image: #bytes=146593, CPU time=0.05 sec.
#------------------------------------------------------------------------
# 03 _ Write ATPG Patterns
#------------------------------------------------------------------------
if { ! [file exist ./patterns/${occ_mode}/${fault}/gzip] } { exec mkdir -p ./patterns/${occ_mode}/${fault}/gzip }
if { ! [file exist ./patterns/${occ_mode}/${fault}/stil] } { exec mkdir -p ./patterns/${occ_mode}/${fault}/stil }
write_patterns ./patterns/${occ_mode}/${fault}/stil/${top_design}_${mode}.stil  	-format stil -unified_stil_flow -replace
 Patterns written reference 1494 V statements, generating 24294 test cycles
 End writing file 'async_fifo_TM2.stil' with 149 patterns, File_size = 227594, CPU_time = 0.0 sec.
write_patterns ./patterns/${occ_mode}/${fault}/gzip/${top_design}_${mode}_pats.gz 	-format binary -compress gzip -replace
 End writing file 'async_fifo_TM2_pats.gz' with 149 patterns, File_size = 8755, CPU_time = 0.0 sec.
#------------------------------------------------------------------------
# 04 _ Save simulation testbench
#------------------------------------------------------------------------
if {! [file exist ./max_sim/logs]} {exec mkdir -p ./max_sim/logs }
if {! [file exist ./max_sim/parallel/${occ_mode}/${fault}/${mode}]} 	{exec mkdir -p ./max_sim/parallel/${occ_mode}/${fault}/${mode} }
if {! [file exist ./max_sim/serial/${occ_mode}/${fault}/${mode}]} 	{exec mkdir -p ./max_sim/serial/${occ_mode}/${fault}/${mode} }
# parallel simulation testbench 
write_testbench -input ./patterns/${occ_mode}/${fault}/stil/${top_design}_${mode}.stil 	-output ./max_sim/parallel/${occ_mode}/${fault}/${mode}/pat_parallel_tb 	-parameter {-parallel -replace -log ./max_sim/logs/pat_parallel_tb.log} 
 Executing 'stil2verilog'...
# parallel simulation testbench with back annotated delay
write_testbench -input ./patterns/${occ_mode}/${fault}/stil/${top_design}_${mode}.stil 	-output ./max_sim/serial/${occ_mode}/${fault}/${mode}/pat_serial_tb 	-parameter {-serial -replace 	-log ./max_sim/logs/pat_serial_tb.log -sdf_file ../pt/sdf/async_fifo.sdf} 
 Executing 'stil2verilog'...
 Warning: Internal pattern set is now deleted. (M133)
 Warning: Current simulation model is now deleted. (M39)
#-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-#
#									#
#		*** common script for all faults ***			#
#		1) read design and simualtion library			#
#		2) build test model 					#
#									#
#-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-#
#------------------------------------------------------------------------
# 00 _ Save TetraMax Transcript to Log File
#------------------------------------------------------------------------
if { $mode == {TM1} } { 

if { ! [file exist ./logs/${occ_mode}/${fault}] } 	{ exec mkdir -p ./logs/${occ_mode}/${fault} }

set_messages -log ./logs/${occ_mode}/${fault}/tmax_atpg.log -replace  

#------------------------------------------------------------------------
# 01 _ Read Libraries and Design
#------------------------------------------------------------------------
if { ! [file exist ./reports/${occ_mode}/${fault}] } 	{ exec mkdir -p ./reports/${occ_mode}/${fault} }

read_netlist ../libs/mw_lib/tmax/libs.v.gz
read_netlist ../syn/mapped_scan/${top_design}.v

report_modules -undefined > ./reports/${occ_mode}/${fault}/01_read.rpt

}
#------------------------------------------------------------------------
# 02 _ Build ATPG Design Model
#------------------------------------------------------------------------
run_build_model  $top_design
 ------------------------------------------------------------------------------
 Begin build model for topcut = async_fifo ...
 ------------------------------------------------------------------------------
 There were 2966 primitives and 2 faultable pins removed during model optimizations
 Warning: Rule B7 (undriven module output pin) was violated 16 times.
 Warning: Rule B8 (unconnected module input pin) was violated 10 times.
 Warning: Rule B9 (undriven module internal net) was violated 12 times.
 Warning: Rule B10 (unconnected module internal net) was violated 34 times.
 End build model: #primitives=1607, CPU_time=0.02 sec, Memory=1MB
 ------------------------------------------------------------------------------
 Begin learning analyses...
 End learning analyses, total learning CPU time=0.01 sec.
 ------------------------------------------------------------------------------
report_modules -summary >  ./reports/${occ_mode}/${fault}/02_build.rpt
report_modules -errors  >> ./reports/${occ_mode}/${fault}/02_build.rpt

Reading SDC version 2.1...


Summary of unsupported constraints:
 Information: Ignored 1 unsupported 'set_units' constraint. (SDC-4)

 Information: Ignored 4 unsupported 'set_clock_transition' constraints. (SDC-4)

 Information: Ignored 1 unsupported 'set_operating_conditions' constraint. (SDC-4)

 Information: Ignored 1 unsupported 'get_libs' constraint. (SDC-4)

 End read_sdc: #false_paths:4 #multicycle paths:0 #disable_timing:0 #clk_groups:1
               #clks:2 #generated clks:0 #Case Stmt:9
 ------------------------------------------------------------------------------
 Begin scan design rules checking...
 ------------------------------------------------------------------------------
 Begin reading test protocol file ./dftc_protocols/async_fifo_TM3.spf...
 End parsing STIL file ./dftc_protocols/async_fifo_TM3.spf with 0 errors.
 Test protocol file reading completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Warning: Unconstrained reference clock wclk is now constrained to its off state. (M559)
 Warning: Unconstrained reference clock rclk is now constrained to its off state. (M559)
 Warning: Unconstrained reference clock ate_wclk is now constrained to its off state. (M559)
 Warning: Unconstrained reference clock ate_rclk is now constrained to its off state. (M559)
 Begin simulating test protocol procedures...
 Nonscan cell constant value results: #constant0 = 2, #constant1 = 0
 Nonscan cell load value results    : #load0 = 24, #load1 = 2
 Test protocol simulation completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin scan chain operation checking...
 Chain 1 successfully traced with 193 scan_cells.
 Warning: Rule S19 (nonscan cell disturb) was violated 22 times.
 Warning: Rule S22 (multiply clocked scan chain) was violated 1 times.
 Warning: Rule S29 (invalid dependent slave operation) was violated 1 times.
 Scan chain operation checking completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin clock rules checking...
 Warning: Rule C16 (nonscan cell port unable to capture) was violated 22 times.
 Clock rules checking completed, CPU time=0.00 sec.
 Clock grouping results: #pairs=0, #groups=0, #serial_pairs=0, #disturbed_pairs=1, CPU time=0.00 sec.
 Begin PLL clock rules checking...
 PLL clock rules checking completed, CPU time=0.01 sec.
 ------------------------------------------------------------------------------
 Begin nonscan rules checking...
 Nonscan cell summary: #DFF=22  #DLAT=4  #RAM_outs=0  tla_usage_type=no_clock_tla
 Nonscan behavior:  #C0=2  #TLA=2  #L0=20  #L1=2
 Nonscan rules checking completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin DRC dependent learning...
 Fast-sequential depth results: control=0(0), observe=0(0), detect=0(0), CPU time=0.00 sec
 DRC dependent learning completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 DRC Summary Report
 ------------------------------------------------------------------------------
 Warning: Rule S19 (nonscan cell disturb) was violated 22 times.
 Warning: Rule S22 (multiply clocked scan chain) was violated 1 times.
 Warning: Rule S29 (invalid dependent slave operation) was violated 1 times.
 Warning: Rule C16 (nonscan cell port unable to capture) was violated 22 times.
 There were 46 violations that occurred during DRC process.
 Design rules checking was successful, total CPU time=0.02 sec.
 ------------------------------------------------------------------------------
 reading slack data file ./pt/slacks/pll_based/async_fifo_TM3.slack.
 354 faults were added to nofault list in module async_fifo_SCCOMP_DECOMPRESSOR.
 100 faults were added to nofault list in module async_fifo_SCCOMP_COMPRESSOR.
 4578 faults were added to fault list.
 The max tmgn for small delay defect faults has been set to 2.2098
 
 ATPG performed for transition fault model using internal pattern source.
 ----------------------------------------------------------
 #patterns     #faults     #ATPG faults  test      process
 stored     detect/active  red/au/abort  coverage  CPU time
 ---------  -------------  ------------  --------  --------
 Begin deterministic ATPG: #collapsed_faults=2879, abort_limit=10...
 Optimized clock launch transition fault ATPG is enabled.
 1 out of 6 timing exceptions are optimized.
 32            735    816         0/7/1    36.05%      0.03
 Local redundancy analysis results: #redundant_faults=0, CPU_time=0.00 sec
 63            344    450        0/29/2    42.96%      0.12
 93            119    319        0/41/7    45.24%      0.19
 123            58    213       0/89/10    46.40%      0.24
 148            38    110      0/154/39    47.17%      0.29
 Untestable analysis results: #faults=22, #UR_faults=0, #AU_faults=13, #aborted=8, #inferred=0/0, time=0.00 sec
 149             1     95      0/155/46    47.19%      0.30
 
    Collapsed Transition Fault Summary Report
 -----------------------------------------------
 fault class                     code   #faults
 ------------------------------  ----  ---------
 Detected                         DT       2151
   detected_by_simulation         DS       (789)
   detected_by_implication        DI       (806)
   transition-partially_detected   TP       (556)
 Possibly detected                PT          0
 Undetectable                     UD         20
   undetectable-tied              UT        (18)
   undetectable-redundant         UR         (2)
 ATPG untestable                  AU       2362
   atpg_untestable-not_detected   AN      (2362)
 Not detected                     ND         45
   not-observed                   NO        (45)
 -----------------------------------------------
 total faults                              4578
 test coverage                            47.19%
 fault coverage                           46.99%
 -----------------------------------------------
            Pattern Summary Report
 -----------------------------------------------
 #internal patterns                         149
     #basic_scan patterns                     1
     #fast_sequential patterns              148
 -----------------------------------------------
            CPU Usage Summary Report
 -----------------------------------------------
 Total CPU time                            0.31
 -----------------------------------------------
 Write faults completed: 4578 faults were written into file "./faults/pll_based/TM3/trans_sdd.flt".
#-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-#
#									#
#		*** common script for all faults ***			#
#		1) generate required reports				#
#		2) write test patterns					#
#		3) write testbenches for pattern validation		#
#		4) write images for post testing diagnosis		#
#									#
#-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-#
#------------------------------------------------------------------------
# 01 _ Generate ATPG Summaries and Reports
#------------------------------------------------------------------------
if { ! [file exist ./reports/${occ_mode}/${fault}/${mode}] } 	{ exec mkdir -p ./reports/${occ_mode}/${fault}/${mode} }
# reports setting
set_faults -pt_credit 0 -au_credit 0
set_faults -summary verbose -fault_coverage -report collapsed
 Warning: Unused gate deletion affects fault coverage calculation. (M245)
set_patterns -histogram_summary
set_faults -fault_coverage
 Warning: Unused gate deletion affects fault coverage calculation. (M245)
# report coverage
report_summaries >  ./reports/${occ_mode}/${fault}/${mode}/01_coverage.rpt
# report drc violations
report_violations -all >  ./reports/${occ_mode}/${fault}/${mode}/02_drc_violations.rpt
# report not detected faults
report_faults -class nd >  ./reports/${occ_mode}/${fault}/${mode}/03_nd_faults.rpt
# report_clocks
report_clocks -intclocks  >  ./reports/${occ_mode}/${fault}/${mode}/clocks.rpt
report_clocks -pllclocks >>  ./reports/${occ_mode}/${fault}/${mode}/clocks.rpt
report_clocks -matrix    >>  ./reports/${occ_mode}/${fault}/${mode}/clocks.rpt
#------------------------------------------------------------------------
# 02 _ Write Image File for Later Post_Testing Diagnosis
#------------------------------------------------------------------------
if { ! [file exist ./imgs/${occ_mode}/${fault}] } 	{ exec mkdir -p ./imgs/${occ_mode}/${fault} }
write_image ./imgs/${occ_mode}/${fault}/${top_design}_${mode}.img.gz 	-compress gzip -replace -violations 
 End write image: #bytes=146378, CPU time=0.04 sec.
#------------------------------------------------------------------------
# 03 _ Write ATPG Patterns
#------------------------------------------------------------------------
if { ! [file exist ./patterns/${occ_mode}/${fault}/gzip] } { exec mkdir -p ./patterns/${occ_mode}/${fault}/gzip }
if { ! [file exist ./patterns/${occ_mode}/${fault}/stil] } { exec mkdir -p ./patterns/${occ_mode}/${fault}/stil }
write_patterns ./patterns/${occ_mode}/${fault}/stil/${top_design}_${mode}.stil  	-format stil -unified_stil_flow -replace
 Patterns written reference 1494 V statements, generating 30294 test cycles
 End writing file 'async_fifo_TM3.stil' with 149 patterns, File_size = 212373, CPU_time = 0.0 sec.
write_patterns ./patterns/${occ_mode}/${fault}/gzip/${top_design}_${mode}_pats.gz 	-format binary -compress gzip -replace
 End writing file 'async_fifo_TM3_pats.gz' with 149 patterns, File_size = 8782, CPU_time = 0.0 sec.
#------------------------------------------------------------------------
# 04 _ Save simulation testbench
#------------------------------------------------------------------------
if {! [file exist ./max_sim/logs]} {exec mkdir -p ./max_sim/logs }
if {! [file exist ./max_sim/parallel/${occ_mode}/${fault}/${mode}]} 	{exec mkdir -p ./max_sim/parallel/${occ_mode}/${fault}/${mode} }
if {! [file exist ./max_sim/serial/${occ_mode}/${fault}/${mode}]} 	{exec mkdir -p ./max_sim/serial/${occ_mode}/${fault}/${mode} }
# parallel simulation testbench 
write_testbench -input ./patterns/${occ_mode}/${fault}/stil/${top_design}_${mode}.stil 	-output ./max_sim/parallel/${occ_mode}/${fault}/${mode}/pat_parallel_tb 	-parameter {-parallel -replace -log ./max_sim/logs/pat_parallel_tb.log} 
 Executing 'stil2verilog'...
# parallel simulation testbench with back annotated delay
write_testbench -input ./patterns/${occ_mode}/${fault}/stil/${top_design}_${mode}.stil 	-output ./max_sim/serial/${occ_mode}/${fault}/${mode}/pat_serial_tb 	-parameter {-serial -replace 	-log ./max_sim/logs/pat_serial_tb.log -sdf_file ../pt/sdf/async_fifo.sdf} 
 Executing 'stil2verilog'...
 Warning: Internal pattern set is now deleted. (M133)
 Warning: Current simulation model is now deleted. (M39)
#-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-#
#									#
#		*** common script for all faults ***			#
#		1) read design and simualtion library			#
#		2) build test model 					#
#									#
#-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-#
#------------------------------------------------------------------------
# 00 _ Save TetraMax Transcript to Log File
#------------------------------------------------------------------------
if { $mode == {TM1} } { 

if { ! [file exist ./logs/${occ_mode}/${fault}] } 	{ exec mkdir -p ./logs/${occ_mode}/${fault} }

set_messages -log ./logs/${occ_mode}/${fault}/tmax_atpg.log -replace  

#------------------------------------------------------------------------
# 01 _ Read Libraries and Design
#------------------------------------------------------------------------
if { ! [file exist ./reports/${occ_mode}/${fault}] } 	{ exec mkdir -p ./reports/${occ_mode}/${fault} }

read_netlist ../libs/mw_lib/tmax/libs.v.gz
read_netlist ../syn/mapped_scan/${top_design}.v

report_modules -undefined > ./reports/${occ_mode}/${fault}/01_read.rpt

}
#------------------------------------------------------------------------
# 02 _ Build ATPG Design Model
#------------------------------------------------------------------------
run_build_model  $top_design
 ------------------------------------------------------------------------------
 Begin build model for topcut = async_fifo ...
 ------------------------------------------------------------------------------
 There were 2966 primitives and 2 faultable pins removed during model optimizations
 Warning: Rule B7 (undriven module output pin) was violated 16 times.
 Warning: Rule B8 (unconnected module input pin) was violated 10 times.
 Warning: Rule B9 (undriven module internal net) was violated 12 times.
 Warning: Rule B10 (unconnected module internal net) was violated 34 times.
 End build model: #primitives=1607, CPU_time=0.03 sec, Memory=1MB
 ------------------------------------------------------------------------------
 Begin learning analyses...
 End learning analyses, total learning CPU time=0.02 sec.
 ------------------------------------------------------------------------------
report_modules -summary >  ./reports/${occ_mode}/${fault}/02_build.rpt
report_modules -errors  >> ./reports/${occ_mode}/${fault}/02_build.rpt

Reading SDC version 2.1...


Summary of unsupported constraints:
 Information: Ignored 1 unsupported 'set_units' constraint. (SDC-4)

 Information: Ignored 4 unsupported 'set_clock_transition' constraints. (SDC-4)

 Information: Ignored 1 unsupported 'set_operating_conditions' constraint. (SDC-4)

 Information: Ignored 1 unsupported 'get_libs' constraint. (SDC-4)

 End read_sdc: #false_paths:4 #multicycle paths:0 #disable_timing:0 #clk_groups:1
               #clks:2 #generated clks:0 #Case Stmt:9
 ------------------------------------------------------------------------------
 Begin scan design rules checking...
 ------------------------------------------------------------------------------
 Begin reading test protocol file ./dftc_protocols/async_fifo_TM4.spf...
 Warning: Rule V6 (unused item) was violated 1 times.
 End parsing STIL file ./dftc_protocols/async_fifo_TM4.spf with 0 errors.
 Test protocol file reading completed, CPU time=0.01 sec.
 ------------------------------------------------------------------------------
 Warning: Unconstrained reference clock wclk is now constrained to its off state. (M559)
 Warning: Unconstrained reference clock rclk is now constrained to its off state. (M559)
 Warning: Unconstrained reference clock ate_wclk is now constrained to its off state. (M559)
 Warning: Unconstrained reference clock ate_rclk is now constrained to its off state. (M559)
 Begin simulating test protocol procedures...
 Nonscan cell constant value results: #constant0 = 2, #constant1 = 0
 Nonscan cell load value results    : #load0 = 24, #load1 = 2
 Test protocol simulation completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin compressor chain I/O checking: #undefined_io=48 ...
 End compressor chain output checking: #resolved=0, #ambiguous=24, #failed=0, #undefined_inputs=24
 Begin scan chain operation checking...
 Chain 1 successfully traced with 8 scan_cells.
 Chain 2 successfully traced with 8 scan_cells.
 Chain 3 successfully traced with 9 scan_cells.
 Chain 4 successfully traced with 8 scan_cells.
 Chain 5 successfully traced with 8 scan_cells.
 Chain 6 successfully traced with 8 scan_cells.
 Chain 7 successfully traced with 8 scan_cells.
 Chain 8 successfully traced with 8 scan_cells.
 Chain 9 successfully traced with 8 scan_cells.
 Chain 10 successfully traced with 8 scan_cells.
 Chain 11 successfully traced with 8 scan_cells.
 Chain 12 successfully traced with 8 scan_cells.
 Chain 13 successfully traced with 8 scan_cells.
 Chain 14 successfully traced with 8 scan_cells.
 Chain 15 successfully traced with 8 scan_cells.
 Chain 16 successfully traced with 8 scan_cells.
 Chain 17 successfully traced with 8 scan_cells.
 Chain 18 successfully traced with 8 scan_cells.
 Chain 19 successfully traced with 8 scan_cells.
 Chain 20 successfully traced with 8 scan_cells.
 Chain 21 successfully traced with 8 scan_cells.
 Chain 22 successfully traced with 8 scan_cells.
 Chain 23 successfully traced with 8 scan_cells.
 Chain 24 successfully traced with 8 scan_cells.
 End ambiguous chain resolution: #resolved=24, #ambiguous=0, #failed=0
 Warning: Rule S19 (nonscan cell disturb) was violated 23 times.
 Scan chain operation checking completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin clock rules checking...
 Warning: Rule C3 (no latch transparency when clocks off) was violated 1 times.
 Warning: Rule C16 (nonscan cell port unable to capture) was violated 22 times.
 Clock rules checking completed, CPU time=0.00 sec.
 Clock grouping results: #pairs=0, #groups=0, #serial_pairs=0, #disturbed_pairs=1, CPU time=0.00 sec.
 Begin PLL clock rules checking...
 PLL clock rules checking completed, CPU time=0.01 sec.
 ------------------------------------------------------------------------------
 Begin nonscan rules checking...
 Nonscan cell summary: #DFF=22  #DLAT=6  #RAM_outs=0  tla_usage_type=hot_clock_tla
 Nonscan behavior:  #C0=2  #TLA=3  #L0=20  #L1=2  #LS=1
 Nonscan rules checking completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin compressor rules checking...
 Warning: Rule R10 (two chains always have the same unload signature) was violated 36 times.
 Warning: Rule R11 (X on chain affects observability of other chains) was violated 136 times.
 Warning: Rule R30 (two nonclock chains not independent when clock chain inputs are ignored) was violated 231 times.
 Compressor rules checking completed: #chains=24, #scanins=4, #scanouts=4, #shifts=10, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin DRC dependent learning...
 Fast-sequential depth results: control=1(1368), observe=0(0), detect=0(0), CPU time=0.00 sec
 DRC dependent learning completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 DRC Summary Report
 ------------------------------------------------------------------------------
 Warning: Rule V6 (unused item) was violated 1 times.
 Warning: Rule S19 (nonscan cell disturb) was violated 23 times.
 Warning: Rule C3 (no latch transparency when clocks off) was violated 1 times.
 Warning: Rule C16 (nonscan cell port unable to capture) was violated 22 times.
 Warning: Rule R10 (two chains always have the same unload signature) was violated 36 times.
 Warning: Rule R11 (X on chain affects observability of other chains) was violated 136 times.
 Warning: Rule R30 (two nonclock chains not independent when clock chain inputs are ignored) was violated 231 times.
 There were 450 violations that occurred during DRC process.
 Design rules checking was successful, total CPU time=0.02 sec.
 ------------------------------------------------------------------------------
 reading slack data file ./pt/slacks/pll_based/async_fifo_TM4.slack.
 4992 faults were added to fault list.
 The max tmgn for small delay defect faults has been set to 2.2194
 
 ATPG performed for transition fault model using internal pattern source.
 ----------------------------------------------------------
 #patterns     #faults     #ATPG faults  test      process
 stored     detect/active  red/au/abort  coverage  CPU time
 ---------  -------------  ------------  --------  --------
 Begin deterministic ATPG: #collapsed_faults=2873, abort_limit=10...
 Optimized clock launch transition fault ATPG is enabled.
 1 out of 6 timing exceptions are optimized.
 32            622    926        0/10/4    40.00%      0.09
 Local redundancy analysis results: #redundant_faults=0, CPU_time=0.00 sec
 64            256    652       0/28/10    45.62%      0.23
 91             79    502       0/99/28    47.20%      0.43
 117            40    333      0/228/35    48.03%      0.60
 Untestable analysis results: #faults=151, #UR_faults=0, #AU_faults=71, #aborted=23, #inferred=0/0, time=0.01 sec
 131            29    200      0/261/56    48.57%      0.67
 Compressor unload adjustment completed: #patterns_adjusted=131, #patterns_added=1, CPU time=0.00 sec.
 
    Collapsed Transition Fault Summary Report
 -----------------------------------------------
 fault class                     code   #faults
 ------------------------------  ----  ---------
 Detected                         DT       2415
   detected_by_simulation         DS       (649)
   detected_by_implication        DI      (1240)
   transition-partially_detected   TP       (526)
 Possibly detected                PT          0
 Undetectable                     UD         20
   undetectable-tied              UT        (18)
   undetectable-redundant         UR         (2)
 ATPG untestable                  AU       2506
   atpg_untestable-not_detected   AN      (2506)
 Not detected                     ND         51
   not-observed                   NO        (51)
 -----------------------------------------------
 total faults                              4992
 test coverage                            48.57%
 fault coverage                           48.38%
 -----------------------------------------------
            Pattern Summary Report
 -----------------------------------------------
 #internal patterns                         132
     #basic_scan patterns                     1
     #fast_sequential patterns              131
 -----------------------------------------------
            CPU Usage Summary Report
 -----------------------------------------------
 Total CPU time                            0.67
 -----------------------------------------------
 Write faults completed: 4992 faults were written into file "./faults/pll_based/TM4/trans_sdd.flt".
#-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-#
#									#
#		*** common script for all faults ***			#
#		1) generate required reports				#
#		2) write test patterns					#
#		3) write testbenches for pattern validation		#
#		4) write images for post testing diagnosis		#
#									#
#-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-#
#------------------------------------------------------------------------
# 01 _ Generate ATPG Summaries and Reports
#------------------------------------------------------------------------
if { ! [file exist ./reports/${occ_mode}/${fault}/${mode}] } 	{ exec mkdir -p ./reports/${occ_mode}/${fault}/${mode} }
# reports setting
set_faults -pt_credit 0 -au_credit 0
set_faults -summary verbose -fault_coverage -report collapsed
 Warning: Unused gate deletion affects fault coverage calculation. (M245)
set_patterns -histogram_summary
set_faults -fault_coverage
 Warning: Unused gate deletion affects fault coverage calculation. (M245)
# report coverage
report_summaries >  ./reports/${occ_mode}/${fault}/${mode}/01_coverage.rpt
# report drc violations
report_violations -all >  ./reports/${occ_mode}/${fault}/${mode}/02_drc_violations.rpt
# report not detected faults
report_faults -class nd >  ./reports/${occ_mode}/${fault}/${mode}/03_nd_faults.rpt
# report_clocks
report_clocks -intclocks  >  ./reports/${occ_mode}/${fault}/${mode}/clocks.rpt
report_clocks -pllclocks >>  ./reports/${occ_mode}/${fault}/${mode}/clocks.rpt
report_clocks -matrix    >>  ./reports/${occ_mode}/${fault}/${mode}/clocks.rpt
#------------------------------------------------------------------------
# 02 _ Write Image File for Later Post_Testing Diagnosis
#------------------------------------------------------------------------
if { ! [file exist ./imgs/${occ_mode}/${fault}] } 	{ exec mkdir -p ./imgs/${occ_mode}/${fault} }
write_image ./imgs/${occ_mode}/${fault}/${top_design}_${mode}.img.gz 	-compress gzip -replace -violations 
 End write image: #bytes=148616, CPU time=0.04 sec.
#------------------------------------------------------------------------
# 03 _ Write ATPG Patterns
#------------------------------------------------------------------------
if { ! [file exist ./patterns/${occ_mode}/${fault}/gzip] } { exec mkdir -p ./patterns/${occ_mode}/${fault}/gzip }
if { ! [file exist ./patterns/${occ_mode}/${fault}/stil] } { exec mkdir -p ./patterns/${occ_mode}/${fault}/stil }
write_patterns ./patterns/${occ_mode}/${fault}/stil/${top_design}_${mode}.stil  	-format stil -unified_stil_flow -replace
 Patterns written reference 1324 V statements, generating 2521 test cycles
 End writing file 'async_fifo_TM4.stil' with 132 patterns, File_size = 172827, CPU_time = 0.0 sec.
write_patterns ./patterns/${occ_mode}/${fault}/gzip/${top_design}_${mode}_pats.gz 	-format binary -compress gzip -replace
 End writing file 'async_fifo_TM4_pats.gz' with 132 patterns, File_size = 3997, CPU_time = 0.0 sec.
#------------------------------------------------------------------------
# 04 _ Save simulation testbench
#------------------------------------------------------------------------
if {! [file exist ./max_sim/logs]} {exec mkdir -p ./max_sim/logs }
if {! [file exist ./max_sim/parallel/${occ_mode}/${fault}/${mode}]} 	{exec mkdir -p ./max_sim/parallel/${occ_mode}/${fault}/${mode} }
if {! [file exist ./max_sim/serial/${occ_mode}/${fault}/${mode}]} 	{exec mkdir -p ./max_sim/serial/${occ_mode}/${fault}/${mode} }
# parallel simulation testbench 
write_testbench -input ./patterns/${occ_mode}/${fault}/stil/${top_design}_${mode}.stil 	-output ./max_sim/parallel/${occ_mode}/${fault}/${mode}/pat_parallel_tb 	-parameter {-parallel -replace -log ./max_sim/logs/pat_parallel_tb.log} 
 Executing 'stil2verilog'...
# parallel simulation testbench with back annotated delay
write_testbench -input ./patterns/${occ_mode}/${fault}/stil/${top_design}_${mode}.stil 	-output ./max_sim/serial/${occ_mode}/${fault}/${mode}/pat_serial_tb 	-parameter {-serial -replace 	-log ./max_sim/logs/pat_serial_tb.log -sdf_file ../pt/sdf/async_fifo.sdf} 
 Executing 'stil2verilog'...
 Warning: Internal pattern set is now deleted. (M133)
 Warning: Current simulation model is now deleted. (M39)
exit
