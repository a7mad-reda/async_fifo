 Begin reading netlist ( ../libs/mw_lib/tmax/libs.v.gz )...
 End parsing Verilog file ../libs/mw_lib/tmax/libs.v.gz with 0 errors.
 End reading netlist: #modules=1005, top=pv0a, #lines=10922, CPU_time=0.03 sec, Memory=2MB
 Begin reading netlist ( ../syn/mapped_scan/async_fifo.v )...
 End parsing Verilog file ../syn/mapped_scan/async_fifo.v with 0 errors.
 End reading netlist: #modules=26, top=async_fifo, #lines=1600, CPU_time=0.02 sec, Memory=1MB
#------------------------------------------------------------------------
# 02 _ Build ATPG Design Model
#------------------------------------------------------------------------
run_build_model  $top_design
 ------------------------------------------------------------------------------
 Begin build model for topcut = async_fifo ...
 ------------------------------------------------------------------------------
 There were 2966 primitives and 2 faultable pins removed during model optimizations
 Warning: Rule B7 (undriven module output pin) was violated 16 times.
 Warning: Rule B8 (unconnected module input pin) was violated 10 times.
 Warning: Rule B9 (undriven module internal net) was violated 12 times.
 Warning: Rule B10 (unconnected module internal net) was violated 34 times.
 End build model: #primitives=1607, CPU_time=0.02 sec, Memory=1MB
 ------------------------------------------------------------------------------
 Begin learning analyses...
 End learning analyses, total learning CPU time=0.01 sec.
 ------------------------------------------------------------------------------
report_modules -summary >  ./reports/${occ_mode}/${fault}/02_build.rpt
report_modules -errors  >> ./reports/${occ_mode}/${fault}/02_build.rpt

Reading SDC version 2.1...


Summary of unsupported constraints:
 Information: Ignored 1 unsupported 'set_units' constraint. (SDC-4)

 Information: Ignored 4 unsupported 'set_clock_transition' constraints. (SDC-4)

 Information: Ignored 1 unsupported 'set_operating_conditions' constraint. (SDC-4)

 Information: Ignored 1 unsupported 'get_libs' constraint. (SDC-4)

 End read_sdc: #false_paths:5 #multicycle paths:0 #disable_timing:0 #clk_groups:1
               #clks:2 #generated clks:0 #Case Stmt:9
 ------------------------------------------------------------------------------
 Begin scan design rules checking...
 ------------------------------------------------------------------------------
 Begin reading test protocol file ./occ_bypass_protocols/async_fifo_TM1.spf...
 End parsing STIL file ./occ_bypass_protocols/async_fifo_TM1.spf with 0 errors.
 Test protocol file reading completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin simulating test protocol procedures...
 Nonscan cell constant value results: #constant0 = 2, #constant1 = 2
 Nonscan cell load value results    : #load0 = 4, #load1 = 2
 Test protocol simulation completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin scan chain operation checking...
 Chain 1 successfully traced with 8 scan_cells.
 Chain 2 successfully traced with 8 scan_cells.
 Chain 3 successfully traced with 153 scan_cells.
 Chain 4 successfully traced with 24 scan_cells.
 Warning: Rule S19 (nonscan cell disturb) was violated 23 times.
 Scan chain operation checking completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin clock rules checking...
 Warning: Rule C3 (no latch transparency when clocks off) was violated 1 times.
 Clock rules checking completed, CPU time=0.00 sec.
 The following clocks were identified as groupable with clock wclk (0).
    rclk (12)
 Clock grouping results: #pairs=3, #groups=1, #serial_pairs=2, #disturbed_pairs=1, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin nonscan rules checking...
 Nonscan cell summary: #DFF=22  #DLAT=6  #RAM_outs=0  tla_usage_type=hot_clock_tla
 Nonscan behavior:  #C0=2  #C1=2  #TLA=1  #L0=2  #LE=20  #LS=1
 Nonscan rules checking completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin DRC dependent learning...
 Fast-sequential depth results: control=4(1572), observe=0(0), detect=0(0), CPU time=0.00 sec
 DRC dependent learning completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 DRC Summary Report
 ------------------------------------------------------------------------------
 Warning: Rule S19 (nonscan cell disturb) was violated 23 times.
 Warning: Rule C3 (no latch transparency when clocks off) was violated 1 times.
 There were 24 violations that occurred during DRC process.
 1 potential clock groups were identified.
 Design rules checking was successful, total CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 reading slack data file ./pt/slacks/occ_bypass/async_fifo_TM1.slack.
 354 faults were added to nofault list in module async_fifo_SCCOMP_DECOMPRESSOR.
 100 faults were added to nofault list in module async_fifo_SCCOMP_COMPRESSOR.
 5654 faults were added to fault list.
 The max tmgn for small delay defect faults has been set to 2.2598
 
 ATPG performed for transition fault model using internal pattern source.
 ----------------------------------------------------------
 #patterns     #faults     #ATPG faults  test      process
 stored     detect/active  red/au/abort  coverage  CPU time
 ---------  -------------  ------------  --------  --------
 Begin deterministic ATPG: #uncollapsed_faults=3554, abort_limit=10...
 Optimized clock launch transition fault ATPG is enabled.
 2 out of 7 timing exceptions are optimized.
 32           1791   1742         0/1/0    53.87%      0.05
 64            775    967         0/1/0    66.65%      0.13
 94            328    634         0/6/0    71.88%      0.17
 Local redundancy analysis results: #redundant_faults=0, CPU_time=0.00 sec
 124           178    441        0/17/0    74.94%      0.20
 151            96    319        0/41/0    76.46%      0.23
 179            59    240        0/59/0    77.41%      0.26
 Pattern merging terminated due to failure to achieve minimum merges per pass (10).
 206            44    185        0/68/0    78.15%      0.27
 225            23    138        0/90/0    78.52%      0.29
 
   Uncollapsed Transition Fault Summary Report
 -----------------------------------------------
 fault class                     code   #faults
 ------------------------------  ----  ---------
 Detected                         DT       4424
   detected_by_simulation         DS      (1357)
   detected_by_implication        DI       (992)
   transition-partially_detected   TP      (2075)
 Possibly detected                PT          0
 Undetectable                     UD         20
   undetectable-tied              UT        (18)
   undetectable-redundant         UR         (2)
 ATPG untestable                  AU       1210
   atpg_untestable-not_detected   AN      (1210)
 Not detected                     ND          0
 -----------------------------------------------
 total faults                              5654
 test coverage                            78.52%
 -----------------------------------------------
            Pattern Summary Report
 -----------------------------------------------
 #internal patterns                         225
     #basic_scan patterns                     1
     #fast_sequential patterns              224
 -----------------------------------------------
            CPU Usage Summary Report
 -----------------------------------------------
 Total CPU time                            0.30
 -----------------------------------------------
 Write faults completed: 5654 faults were written into file "./faults/occ_bypass/TM1/trans_sdd.flt".
#-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-#
#									#
#		*** common script for all faults ***			#
#		1) generate required reports				#
#		2) write test patterns					#
#		3) write testbenches for pattern validation		#
#		4) write images for post testing diagnosis		#
#									#
#-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-#
#------------------------------------------------------------------------
# 01 _ Generate ATPG Summaries and Reports
#------------------------------------------------------------------------
if { ! [file exist ./reports/${occ_mode}/${fault}/${mode}] } 	{ exec mkdir -p ./reports/${occ_mode}/${fault}/${mode} }
# reports setting
set_faults -pt_credit 0 -au_credit 0
set_faults -summary verbose -fault_coverage -report collapsed
 Warning: Unused gate deletion affects fault coverage calculation. (M245)
set_patterns -histogram_summary
set_faults -fault_coverage
 Warning: Unused gate deletion affects fault coverage calculation. (M245)
# report coverage
report_summaries >  ./reports/${occ_mode}/${fault}/${mode}/01_coverage.rpt
# report drc violations
report_violations -all >  ./reports/${occ_mode}/${fault}/${mode}/02_drc_violations.rpt
# report not detected faults
report_faults -class nd >  ./reports/${occ_mode}/${fault}/${mode}/03_nd_faults.rpt
# report_clocks
report_clocks -intclocks  >  ./reports/${occ_mode}/${fault}/${mode}/clocks.rpt
report_clocks -pllclocks >>  ./reports/${occ_mode}/${fault}/${mode}/clocks.rpt
report_clocks -matrix    >>  ./reports/${occ_mode}/${fault}/${mode}/clocks.rpt
#------------------------------------------------------------------------
# 02 _ Write Image File for Later Post_Testing Diagnosis
#------------------------------------------------------------------------
if { ! [file exist ./imgs/${occ_mode}/${fault}] } 	{ exec mkdir -p ./imgs/${occ_mode}/${fault} }
write_image ./imgs/${occ_mode}/${fault}/${top_design}_${mode}.img.gz 	-compress gzip -replace -violations 
 End write image: #bytes=146012, CPU time=0.05 sec.
#------------------------------------------------------------------------
# 03 _ Write ATPG Patterns
#------------------------------------------------------------------------
if { ! [file exist ./patterns/${occ_mode}/${fault}/gzip] } { exec mkdir -p ./patterns/${occ_mode}/${fault}/gzip }
if { ! [file exist ./patterns/${occ_mode}/${fault}/stil] } { exec mkdir -p ./patterns/${occ_mode}/${fault}/stil }
write_patterns ./patterns/${occ_mode}/${fault}/stil/${top_design}_${mode}.stil  	-format stil -unified_stil_flow -replace
 Patterns written reference 903 V statements, generating 35255 test cycles
 End writing file 'async_fifo_TM1.stil' with 225 patterns, File_size = 201812, CPU_time = 0.0 sec.
write_patterns ./patterns/${occ_mode}/${fault}/gzip/${top_design}_${mode}_pats.gz 	-format binary -compress gzip -replace
 End writing file 'async_fifo_TM1_pats.gz' with 225 patterns, File_size = 16323, CPU_time = 0.0 sec.
#------------------------------------------------------------------------
# 04 _ Save simulation testbench
#------------------------------------------------------------------------
if {! [file exist ./max_sim/logs]} {exec mkdir -p ./max_sim/logs }
if {! [file exist ./max_sim/parallel/${occ_mode}/${fault}/${mode}]} 	{exec mkdir -p ./max_sim/parallel/${occ_mode}/${fault}/${mode} }
if {! [file exist ./max_sim/serial/${occ_mode}/${fault}/${mode}]} 	{exec mkdir -p ./max_sim/serial/${occ_mode}/${fault}/${mode} }
# parallel simulation testbench 
write_testbench -input ./patterns/${occ_mode}/${fault}/stil/${top_design}_${mode}.stil 	-output ./max_sim/parallel/${occ_mode}/${fault}/${mode}/pat_parallel_tb 	-parameter {-parallel -replace -log ./max_sim/logs/pat_parallel_tb.log} 
 Executing 'stil2verilog'...
# parallel simulation testbench with back annotated delay
write_testbench -input ./patterns/${occ_mode}/${fault}/stil/${top_design}_${mode}.stil 	-output ./max_sim/serial/${occ_mode}/${fault}/${mode}/pat_serial_tb 	-parameter {-serial -replace 	-log ./max_sim/logs/pat_serial_tb.log -sdf_file ../pt/sdf/async_fifo.sdf} 
 Executing 'stil2verilog'...
 Warning: Internal pattern set is now deleted. (M133)
 Warning: Current simulation model is now deleted. (M39)
#-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-#
#									#
#		*** common script for all faults ***			#
#		1) read design and simualtion library			#
#		2) build test model 					#
#									#
#-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-#
#------------------------------------------------------------------------
# 00 _ Save TetraMax Transcript to Log File
#------------------------------------------------------------------------
if { $mode == {TM1} } { 

if { ! [file exist ./logs/${occ_mode}/${fault}] } 	{ exec mkdir -p ./logs/${occ_mode}/${fault} }

set_messages -log ./logs/${occ_mode}/${fault}/tmax_atpg.log -replace  

#------------------------------------------------------------------------
# 01 _ Read Libraries and Design
#------------------------------------------------------------------------
if { ! [file exist ./reports/${occ_mode}/${fault}] } 	{ exec mkdir -p ./reports/${occ_mode}/${fault} }

read_netlist ../libs/mw_lib/tmax/libs.v.gz
read_netlist ../syn/mapped_scan/${top_design}.v

report_modules -undefined > ./reports/${occ_mode}/${fault}/01_read.rpt

}
#------------------------------------------------------------------------
# 02 _ Build ATPG Design Model
#------------------------------------------------------------------------
run_build_model  $top_design
 ------------------------------------------------------------------------------
 Begin build model for topcut = async_fifo ...
 ------------------------------------------------------------------------------
 There were 2966 primitives and 2 faultable pins removed during model optimizations
 Warning: Rule B7 (undriven module output pin) was violated 16 times.
 Warning: Rule B8 (unconnected module input pin) was violated 10 times.
 Warning: Rule B9 (undriven module internal net) was violated 12 times.
 Warning: Rule B10 (unconnected module internal net) was violated 34 times.
 End build model: #primitives=1607, CPU_time=0.03 sec, Memory=1MB
 ------------------------------------------------------------------------------
 Begin learning analyses...
 End learning analyses, total learning CPU time=0.01 sec.
 ------------------------------------------------------------------------------
report_modules -summary >  ./reports/${occ_mode}/${fault}/02_build.rpt
report_modules -errors  >> ./reports/${occ_mode}/${fault}/02_build.rpt

Reading SDC version 2.1...


Summary of unsupported constraints:
 Information: Ignored 1 unsupported 'set_units' constraint. (SDC-4)

 Information: Ignored 4 unsupported 'set_clock_transition' constraints. (SDC-4)

 Information: Ignored 1 unsupported 'set_operating_conditions' constraint. (SDC-4)

 Information: Ignored 1 unsupported 'get_libs' constraint. (SDC-4)

 End read_sdc: #false_paths:5 #multicycle paths:0 #disable_timing:0 #clk_groups:1
               #clks:2 #generated clks:0 #Case Stmt:9
 ------------------------------------------------------------------------------
 Begin scan design rules checking...
 ------------------------------------------------------------------------------
 Begin reading test protocol file ./occ_bypass_protocols/async_fifo_TM2.spf...
 End parsing STIL file ./occ_bypass_protocols/async_fifo_TM2.spf with 0 errors.
 Test protocol file reading completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin simulating test protocol procedures...
 Nonscan cell constant value results: #constant0 = 2, #constant1 = 2
 Nonscan cell load value results    : #load0 = 4, #load1 = 2
 Test protocol simulation completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin scan chain operation checking...
 Chain 1 successfully traced with 8 scan_cells.
 Chain 2 successfully traced with 8 scan_cells.
 Chain 3 successfully traced with 153 scan_cells.
 Chain 4 successfully traced with 24 scan_cells.
 Warning: Rule S19 (nonscan cell disturb) was violated 23 times.
 Scan chain operation checking completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin clock rules checking...
 Warning: Rule C3 (no latch transparency when clocks off) was violated 1 times.
 Clock rules checking completed, CPU time=0.00 sec.
 The following clocks were identified as groupable with clock wclk (0).
    rclk (12)
 Clock grouping results: #pairs=3, #groups=1, #serial_pairs=2, #disturbed_pairs=1, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin nonscan rules checking...
 Nonscan cell summary: #DFF=22  #DLAT=6  #RAM_outs=0  tla_usage_type=hot_clock_tla
 Nonscan behavior:  #C0=2  #C1=2  #TLA=1  #L0=2  #LE=20  #LS=1
 Nonscan rules checking completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin DRC dependent learning...
 Fast-sequential depth results: control=4(1572), observe=0(0), detect=0(0), CPU time=0.00 sec
 DRC dependent learning completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 DRC Summary Report
 ------------------------------------------------------------------------------
 Warning: Rule S19 (nonscan cell disturb) was violated 23 times.
 Warning: Rule C3 (no latch transparency when clocks off) was violated 1 times.
 There were 24 violations that occurred during DRC process.
 1 potential clock groups were identified.
 Design rules checking was successful, total CPU time=0.01 sec.
 ------------------------------------------------------------------------------
 reading slack data file ./pt/slacks/occ_bypass/async_fifo_TM2.slack.
 354 faults were added to nofault list in module async_fifo_SCCOMP_DECOMPRESSOR.
 100 faults were added to nofault list in module async_fifo_SCCOMP_COMPRESSOR.
 4574 faults were added to fault list.
 The max tmgn for small delay defect faults has been set to 2.2598
 
 ATPG performed for transition fault model using internal pattern source.
 ----------------------------------------------------------
 #patterns     #faults     #ATPG faults  test      process
 stored     detect/active  red/au/abort  coverage  CPU time
 ---------  -------------  ------------  --------  --------
 Begin deterministic ATPG: #collapsed_faults=2870, abort_limit=10...
 Optimized clock launch transition fault ATPG is enabled.
 2 out of 7 timing exceptions are optimized.
 32           1435   1390         0/1/0    52.99%      0.06
 64            621    768         0/2/0    66.27%      0.17
 96            254    509         0/7/0    71.61%      0.21
 Local redundancy analysis results: #redundant_faults=0, CPU_time=0.00 sec
 128           125    375        0/16/0    74.20%      0.24
 153            67    273        0/51/0    75.65%      0.27
 181            82    184        0/58/0    77.01%      0.29
 Pattern merging terminated due to failure to achieve minimum merges per pass (10).
 203            37    138        0/67/0    77.78%      0.30
 216            18     97        0/90/0    78.09%      0.32
 
    Collapsed Transition Fault Summary Report
 -----------------------------------------------
 fault class                     code   #faults
 ------------------------------  ----  ---------
 Detected                         DT       3556
   detected_by_simulation         DS      (1044)
   detected_by_implication        DI       (820)
   transition-partially_detected   TP      (1692)
 Possibly detected                PT          0
 Undetectable                     UD         20
   undetectable-tied              UT        (18)
   undetectable-redundant         UR         (2)
 ATPG untestable                  AU        998
   atpg_untestable-not_detected   AN       (998)
 Not detected                     ND          0
 -----------------------------------------------
 total faults                              4574
 test coverage                            78.09%
 fault coverage                           77.74%
 -----------------------------------------------
            Pattern Summary Report
 -----------------------------------------------
 #internal patterns                         216
     #basic_scan patterns                     1
     #fast_sequential patterns              215
          # 2-cycle patterns                215
          # 1-load patterns                 215
 -----------------------------------------------
            CPU Usage Summary Report
 -----------------------------------------------
 Total CPU time                            0.33
 -----------------------------------------------
 Write faults completed: 4574 faults were written into file "./faults/occ_bypass/TM2/trans_sdd.flt".
#-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-#
#									#
#		*** common script for all faults ***			#
#		1) generate required reports				#
#		2) write test patterns					#
#		3) write testbenches for pattern validation		#
#		4) write images for post testing diagnosis		#
#									#
#-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-#
#------------------------------------------------------------------------
# 01 _ Generate ATPG Summaries and Reports
#------------------------------------------------------------------------
if { ! [file exist ./reports/${occ_mode}/${fault}/${mode}] } 	{ exec mkdir -p ./reports/${occ_mode}/${fault}/${mode} }
# reports setting
set_faults -pt_credit 0 -au_credit 0
set_faults -summary verbose -fault_coverage -report collapsed
 Warning: Unused gate deletion affects fault coverage calculation. (M245)
set_patterns -histogram_summary
set_faults -fault_coverage
 Warning: Unused gate deletion affects fault coverage calculation. (M245)
# report coverage
report_summaries >  ./reports/${occ_mode}/${fault}/${mode}/01_coverage.rpt
# report drc violations
report_violations -all >  ./reports/${occ_mode}/${fault}/${mode}/02_drc_violations.rpt
# report not detected faults
report_faults -class nd >  ./reports/${occ_mode}/${fault}/${mode}/03_nd_faults.rpt
# report_clocks
report_clocks -intclocks  >  ./reports/${occ_mode}/${fault}/${mode}/clocks.rpt
report_clocks -pllclocks >>  ./reports/${occ_mode}/${fault}/${mode}/clocks.rpt
report_clocks -matrix    >>  ./reports/${occ_mode}/${fault}/${mode}/clocks.rpt
#------------------------------------------------------------------------
# 02 _ Write Image File for Later Post_Testing Diagnosis
#------------------------------------------------------------------------
if { ! [file exist ./imgs/${occ_mode}/${fault}] } 	{ exec mkdir -p ./imgs/${occ_mode}/${fault} }
write_image ./imgs/${occ_mode}/${fault}/${top_design}_${mode}.img.gz 	-compress gzip -replace -violations 
 End write image: #bytes=146012, CPU time=0.05 sec.
#------------------------------------------------------------------------
# 03 _ Write ATPG Patterns
#------------------------------------------------------------------------
if { ! [file exist ./patterns/${occ_mode}/${fault}/gzip] } { exec mkdir -p ./patterns/${occ_mode}/${fault}/gzip }
if { ! [file exist ./patterns/${occ_mode}/${fault}/stil] } { exec mkdir -p ./patterns/${occ_mode}/${fault}/stil }
write_patterns ./patterns/${occ_mode}/${fault}/stil/${top_design}_${mode}.stil  	-format stil -unified_stil_flow -replace
 Patterns written reference 867 V statements, generating 33851 test cycles
 End writing file 'async_fifo_TM2.stil' with 216 patterns, File_size = 194729, CPU_time = 0.0 sec.
write_patterns ./patterns/${occ_mode}/${fault}/gzip/${top_design}_${mode}_pats.gz 	-format binary -compress gzip -replace
 End writing file 'async_fifo_TM2_pats.gz' with 216 patterns, File_size = 15668, CPU_time = 0.0 sec.
#------------------------------------------------------------------------
# 04 _ Save simulation testbench
#------------------------------------------------------------------------
if {! [file exist ./max_sim/logs]} {exec mkdir -p ./max_sim/logs }
if {! [file exist ./max_sim/parallel/${occ_mode}/${fault}/${mode}]} 	{exec mkdir -p ./max_sim/parallel/${occ_mode}/${fault}/${mode} }
if {! [file exist ./max_sim/serial/${occ_mode}/${fault}/${mode}]} 	{exec mkdir -p ./max_sim/serial/${occ_mode}/${fault}/${mode} }
# parallel simulation testbench 
write_testbench -input ./patterns/${occ_mode}/${fault}/stil/${top_design}_${mode}.stil 	-output ./max_sim/parallel/${occ_mode}/${fault}/${mode}/pat_parallel_tb 	-parameter {-parallel -replace -log ./max_sim/logs/pat_parallel_tb.log} 
 Executing 'stil2verilog'...
# parallel simulation testbench with back annotated delay
write_testbench -input ./patterns/${occ_mode}/${fault}/stil/${top_design}_${mode}.stil 	-output ./max_sim/serial/${occ_mode}/${fault}/${mode}/pat_serial_tb 	-parameter {-serial -replace 	-log ./max_sim/logs/pat_serial_tb.log -sdf_file ../pt/sdf/async_fifo.sdf} 
 Executing 'stil2verilog'...
 Warning: Internal pattern set is now deleted. (M133)
 Warning: Current simulation model is now deleted. (M39)
#-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-#
#									#
#		*** common script for all faults ***			#
#		1) read design and simualtion library			#
#		2) build test model 					#
#									#
#-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-#
#------------------------------------------------------------------------
# 00 _ Save TetraMax Transcript to Log File
#------------------------------------------------------------------------
if { $mode == {TM1} } { 

if { ! [file exist ./logs/${occ_mode}/${fault}] } 	{ exec mkdir -p ./logs/${occ_mode}/${fault} }

set_messages -log ./logs/${occ_mode}/${fault}/tmax_atpg.log -replace  

#------------------------------------------------------------------------
# 01 _ Read Libraries and Design
#------------------------------------------------------------------------
if { ! [file exist ./reports/${occ_mode}/${fault}] } 	{ exec mkdir -p ./reports/${occ_mode}/${fault} }

read_netlist ../libs/mw_lib/tmax/libs.v.gz
read_netlist ../syn/mapped_scan/${top_design}.v

report_modules -undefined > ./reports/${occ_mode}/${fault}/01_read.rpt

}
#------------------------------------------------------------------------
# 02 _ Build ATPG Design Model
#------------------------------------------------------------------------
run_build_model  $top_design
 ------------------------------------------------------------------------------
 Begin build model for topcut = async_fifo ...
 ------------------------------------------------------------------------------
 There were 2966 primitives and 2 faultable pins removed during model optimizations
 Warning: Rule B7 (undriven module output pin) was violated 16 times.
 Warning: Rule B8 (unconnected module input pin) was violated 10 times.
 Warning: Rule B9 (undriven module internal net) was violated 12 times.
 Warning: Rule B10 (unconnected module internal net) was violated 34 times.
 End build model: #primitives=1607, CPU_time=0.03 sec, Memory=1MB
 ------------------------------------------------------------------------------
 Begin learning analyses...
 End learning analyses, total learning CPU time=0.02 sec.
 ------------------------------------------------------------------------------
report_modules -summary >  ./reports/${occ_mode}/${fault}/02_build.rpt
report_modules -errors  >> ./reports/${occ_mode}/${fault}/02_build.rpt

Reading SDC version 2.1...


Summary of unsupported constraints:
 Information: Ignored 1 unsupported 'set_units' constraint. (SDC-4)

 Information: Ignored 4 unsupported 'set_clock_transition' constraints. (SDC-4)

 Information: Ignored 1 unsupported 'set_operating_conditions' constraint. (SDC-4)

 Information: Ignored 1 unsupported 'get_libs' constraint. (SDC-4)

 End read_sdc: #false_paths:5 #multicycle paths:0 #disable_timing:0 #clk_groups:1
               #clks:2 #generated clks:0 #Case Stmt:9
 ------------------------------------------------------------------------------
 Begin scan design rules checking...
 ------------------------------------------------------------------------------
 Begin reading test protocol file ./occ_bypass_protocols/async_fifo_TM3.spf...
 End parsing STIL file ./occ_bypass_protocols/async_fifo_TM3.spf with 0 errors.
 Test protocol file reading completed, CPU time=0.01 sec.
 ------------------------------------------------------------------------------
 Begin simulating test protocol procedures...
 Nonscan cell constant value results: #constant0 = 2, #constant1 = 2
 Nonscan cell load value results    : #load0 = 4, #load1 = 2
 Test protocol simulation completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin scan chain operation checking...
 Chain 1 successfully traced with 193 scan_cells.
 Warning: Rule S19 (nonscan cell disturb) was violated 22 times.
 Warning: Rule S22 (multiply clocked scan chain) was violated 1 times.
 Warning: Rule S29 (invalid dependent slave operation) was violated 1 times.
 Scan chain operation checking completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin clock rules checking...
 Clock rules checking completed, CPU time=0.00 sec.
 The following clocks were identified as groupable with clock wclk (0).
    rclk (12)
 Clock grouping results: #pairs=3, #groups=1, #serial_pairs=2, #disturbed_pairs=1, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin nonscan rules checking...
 Nonscan cell summary: #DFF=22  #DLAT=4  #RAM_outs=0  tla_usage_type=hot_clock_tla
 Nonscan behavior:  #C0=2  #C1=2  #L0=2  #LE=20
 Nonscan rules checking completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin DRC dependent learning...
 Fast-sequential depth results: control=4(1572), observe=0(0), detect=0(0), CPU time=0.00 sec
 DRC dependent learning completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 DRC Summary Report
 ------------------------------------------------------------------------------
 Warning: Rule S19 (nonscan cell disturb) was violated 22 times.
 Warning: Rule S22 (multiply clocked scan chain) was violated 1 times.
 Warning: Rule S29 (invalid dependent slave operation) was violated 1 times.
 There were 24 violations that occurred during DRC process.
 1 potential clock groups were identified.
 Design rules checking was successful, total CPU time=0.01 sec.
 ------------------------------------------------------------------------------
 reading slack data file ./pt/slacks/occ_bypass/async_fifo_TM3.slack.
 354 faults were added to nofault list in module async_fifo_SCCOMP_DECOMPRESSOR.
 100 faults were added to nofault list in module async_fifo_SCCOMP_COMPRESSOR.
 4578 faults were added to fault list.
 The max tmgn for small delay defect faults has been set to 2.2598
 
 ATPG performed for transition fault model using internal pattern source.
 ----------------------------------------------------------
 #patterns     #faults     #ATPG faults  test      process
 stored     detect/active  red/au/abort  coverage  CPU time
 ---------  -------------  ------------  --------  --------
 Begin deterministic ATPG: #collapsed_faults=2879, abort_limit=10...
 Optimized clock launch transition fault ATPG is enabled.
 2 out of 7 timing exceptions are optimized.
 32           1418   1413         0/1/1    52.87%      0.05
 64            638    775         0/1/1    65.99%      0.13
 96            242    529         0/5/1    71.02%      0.19
 125           131    365        0/38/1    73.50%      0.22
 Local redundancy analysis results: #redundant_faults=0, CPU_time=0.00 sec
 152            78    281        0/44/1    75.01%      0.24
 178            64    201        0/60/1    76.24%      0.26
 Pattern merging terminated due to failure to achieve minimum merges per pass (10).
 203            50    144        0/67/1    77.34%      0.27
 217            18     97        0/96/1    77.71%      0.29
 
    Collapsed Transition Fault Summary Report
 -----------------------------------------------
 fault class                     code   #faults
 ------------------------------  ----  ---------
 Detected                         DT       3542
   detected_by_simulation         DS      (1042)
   detected_by_implication        DI       (806)
   transition-partially_detected   TP      (1694)
 Possibly detected                PT          0
 Undetectable                     UD         20
   undetectable-tied              UT        (18)
   undetectable-redundant         UR         (2)
 ATPG untestable                  AU       1016
   atpg_untestable-not_detected   AN      (1016)
 Not detected                     ND          0
 -----------------------------------------------
 total faults                              4578
 test coverage                            77.71%
 fault coverage                           77.37%
 -----------------------------------------------
            Pattern Summary Report
 -----------------------------------------------
 #internal patterns                         217
     #basic_scan patterns                     1
     #fast_sequential patterns              216
          # 2-cycle patterns                216
          # 1-load patterns                 216
 -----------------------------------------------
            CPU Usage Summary Report
 -----------------------------------------------
 Total CPU time                            0.29
 -----------------------------------------------
 Write faults completed: 4578 faults were written into file "./faults/occ_bypass/TM3/trans_sdd.flt".
#-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-#
#									#
#		*** common script for all faults ***			#
#		1) generate required reports				#
#		2) write test patterns					#
#		3) write testbenches for pattern validation		#
#		4) write images for post testing diagnosis		#
#									#
#-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-#
#------------------------------------------------------------------------
# 01 _ Generate ATPG Summaries and Reports
#------------------------------------------------------------------------
if { ! [file exist ./reports/${occ_mode}/${fault}/${mode}] } 	{ exec mkdir -p ./reports/${occ_mode}/${fault}/${mode} }
# reports setting
set_faults -pt_credit 0 -au_credit 0
set_faults -summary verbose -fault_coverage -report collapsed
 Warning: Unused gate deletion affects fault coverage calculation. (M245)
set_patterns -histogram_summary
set_faults -fault_coverage
 Warning: Unused gate deletion affects fault coverage calculation. (M245)
# report coverage
report_summaries >  ./reports/${occ_mode}/${fault}/${mode}/01_coverage.rpt
# report drc violations
report_violations -all >  ./reports/${occ_mode}/${fault}/${mode}/02_drc_violations.rpt
# report not detected faults
report_faults -class nd >  ./reports/${occ_mode}/${fault}/${mode}/03_nd_faults.rpt
# report_clocks
report_clocks -intclocks  >  ./reports/${occ_mode}/${fault}/${mode}/clocks.rpt
report_clocks -pllclocks >>  ./reports/${occ_mode}/${fault}/${mode}/clocks.rpt
report_clocks -matrix    >>  ./reports/${occ_mode}/${fault}/${mode}/clocks.rpt
#------------------------------------------------------------------------
# 02 _ Write Image File for Later Post_Testing Diagnosis
#------------------------------------------------------------------------
if { ! [file exist ./imgs/${occ_mode}/${fault}] } 	{ exec mkdir -p ./imgs/${occ_mode}/${fault} }
write_image ./imgs/${occ_mode}/${fault}/${top_design}_${mode}.img.gz 	-compress gzip -replace -violations 
 End write image: #bytes=145800, CPU time=0.04 sec.
#------------------------------------------------------------------------
# 03 _ Write ATPG Patterns
#------------------------------------------------------------------------
if { ! [file exist ./patterns/${occ_mode}/${fault}/gzip] } { exec mkdir -p ./patterns/${occ_mode}/${fault}/gzip }
if { ! [file exist ./patterns/${occ_mode}/${fault}/stil] } { exec mkdir -p ./patterns/${occ_mode}/${fault}/stil }
write_patterns ./patterns/${occ_mode}/${fault}/stil/${top_design}_${mode}.stil  	-format stil -unified_stil_flow -replace
 Patterns written reference 871 V statements, generating 42727 test cycles
 End writing file 'async_fifo_TM3.stil' with 217 patterns, File_size = 173632, CPU_time = 0.0 sec.
write_patterns ./patterns/${occ_mode}/${fault}/gzip/${top_design}_${mode}_pats.gz 	-format binary -compress gzip -replace
 End writing file 'async_fifo_TM3_pats.gz' with 217 patterns, File_size = 16390, CPU_time = 0.0 sec.
#------------------------------------------------------------------------
# 04 _ Save simulation testbench
#------------------------------------------------------------------------
if {! [file exist ./max_sim/logs]} {exec mkdir -p ./max_sim/logs }
if {! [file exist ./max_sim/parallel/${occ_mode}/${fault}/${mode}]} 	{exec mkdir -p ./max_sim/parallel/${occ_mode}/${fault}/${mode} }
if {! [file exist ./max_sim/serial/${occ_mode}/${fault}/${mode}]} 	{exec mkdir -p ./max_sim/serial/${occ_mode}/${fault}/${mode} }
# parallel simulation testbench 
write_testbench -input ./patterns/${occ_mode}/${fault}/stil/${top_design}_${mode}.stil 	-output ./max_sim/parallel/${occ_mode}/${fault}/${mode}/pat_parallel_tb 	-parameter {-parallel -replace -log ./max_sim/logs/pat_parallel_tb.log} 
 Executing 'stil2verilog'...
# parallel simulation testbench with back annotated delay
write_testbench -input ./patterns/${occ_mode}/${fault}/stil/${top_design}_${mode}.stil 	-output ./max_sim/serial/${occ_mode}/${fault}/${mode}/pat_serial_tb 	-parameter {-serial -replace 	-log ./max_sim/logs/pat_serial_tb.log -sdf_file ../pt/sdf/async_fifo.sdf} 
 Executing 'stil2verilog'...
 Warning: Internal pattern set is now deleted. (M133)
 Warning: Current simulation model is now deleted. (M39)
#-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-#
#									#
#		*** common script for all faults ***			#
#		1) read design and simualtion library			#
#		2) build test model 					#
#									#
#-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-#
#------------------------------------------------------------------------
# 00 _ Save TetraMax Transcript to Log File
#------------------------------------------------------------------------
if { $mode == {TM1} } { 

if { ! [file exist ./logs/${occ_mode}/${fault}] } 	{ exec mkdir -p ./logs/${occ_mode}/${fault} }

set_messages -log ./logs/${occ_mode}/${fault}/tmax_atpg.log -replace  

#------------------------------------------------------------------------
# 01 _ Read Libraries and Design
#------------------------------------------------------------------------
if { ! [file exist ./reports/${occ_mode}/${fault}] } 	{ exec mkdir -p ./reports/${occ_mode}/${fault} }

read_netlist ../libs/mw_lib/tmax/libs.v.gz
read_netlist ../syn/mapped_scan/${top_design}.v

report_modules -undefined > ./reports/${occ_mode}/${fault}/01_read.rpt

}
#------------------------------------------------------------------------
# 02 _ Build ATPG Design Model
#------------------------------------------------------------------------
run_build_model  $top_design
 ------------------------------------------------------------------------------
 Begin build model for topcut = async_fifo ...
 ------------------------------------------------------------------------------
 There were 2966 primitives and 2 faultable pins removed during model optimizations
 Warning: Rule B7 (undriven module output pin) was violated 16 times.
 Warning: Rule B8 (unconnected module input pin) was violated 10 times.
 Warning: Rule B9 (undriven module internal net) was violated 12 times.
 Warning: Rule B10 (unconnected module internal net) was violated 34 times.
 End build model: #primitives=1607, CPU_time=0.03 sec, Memory=1MB
 ------------------------------------------------------------------------------
 Begin learning analyses...
 End learning analyses, total learning CPU time=0.01 sec.
 ------------------------------------------------------------------------------
report_modules -summary >  ./reports/${occ_mode}/${fault}/02_build.rpt
report_modules -errors  >> ./reports/${occ_mode}/${fault}/02_build.rpt

Reading SDC version 2.1...


Summary of unsupported constraints:
 Information: Ignored 1 unsupported 'set_units' constraint. (SDC-4)

 Information: Ignored 4 unsupported 'set_clock_transition' constraints. (SDC-4)

 Information: Ignored 1 unsupported 'set_operating_conditions' constraint. (SDC-4)

 Information: Ignored 1 unsupported 'get_libs' constraint. (SDC-4)

 End read_sdc: #false_paths:5 #multicycle paths:0 #disable_timing:0 #clk_groups:1
               #clks:2 #generated clks:0 #Case Stmt:9
 ------------------------------------------------------------------------------
 Begin scan design rules checking...
 ------------------------------------------------------------------------------
 Begin reading test protocol file ./occ_bypass_protocols/async_fifo_TM4.spf...
 Warning: Rule V6 (unused item) was violated 1 times.
 End parsing STIL file ./occ_bypass_protocols/async_fifo_TM4.spf with 0 errors.
 Test protocol file reading completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin simulating test protocol procedures...
 Nonscan cell constant value results: #constant0 = 2, #constant1 = 2
 Nonscan cell load value results    : #load0 = 4, #load1 = 2
 Test protocol simulation completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin compressor chain I/O checking: #undefined_io=48 ...
 End compressor chain output checking: #resolved=0, #ambiguous=24, #failed=0, #undefined_inputs=24
 Begin scan chain operation checking...
 Chain 1 successfully traced with 8 scan_cells.
 Chain 2 successfully traced with 8 scan_cells.
 Chain 3 successfully traced with 9 scan_cells.
 Chain 4 successfully traced with 8 scan_cells.
 Chain 5 successfully traced with 8 scan_cells.
 Chain 6 successfully traced with 8 scan_cells.
 Chain 7 successfully traced with 8 scan_cells.
 Chain 8 successfully traced with 8 scan_cells.
 Chain 9 successfully traced with 8 scan_cells.
 Chain 10 successfully traced with 8 scan_cells.
 Chain 11 successfully traced with 8 scan_cells.
 Chain 12 successfully traced with 8 scan_cells.
 Chain 13 successfully traced with 8 scan_cells.
 Chain 14 successfully traced with 8 scan_cells.
 Chain 15 successfully traced with 8 scan_cells.
 Chain 16 successfully traced with 8 scan_cells.
 Chain 17 successfully traced with 8 scan_cells.
 Chain 18 successfully traced with 8 scan_cells.
 Chain 19 successfully traced with 8 scan_cells.
 Chain 20 successfully traced with 8 scan_cells.
 Chain 21 successfully traced with 8 scan_cells.
 Chain 22 successfully traced with 8 scan_cells.
 Chain 23 successfully traced with 8 scan_cells.
 Chain 24 successfully traced with 8 scan_cells.
 End ambiguous chain resolution: #resolved=24, #ambiguous=0, #failed=0
 Warning: Rule S19 (nonscan cell disturb) was violated 23 times.
 Scan chain operation checking completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin clock rules checking...
 Warning: Rule C3 (no latch transparency when clocks off) was violated 1 times.
 Clock rules checking completed, CPU time=0.00 sec.
 The following clocks were identified as groupable with clock wclk (0).
    rclk (12)
 Clock grouping results: #pairs=3, #groups=1, #serial_pairs=2, #disturbed_pairs=1, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin nonscan rules checking...
 Nonscan cell summary: #DFF=22  #DLAT=6  #RAM_outs=0  tla_usage_type=hot_clock_tla
 Nonscan behavior:  #C0=2  #C1=2  #TLA=1  #L0=2  #LE=20  #LS=1
 Nonscan rules checking completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin compressor rules checking...
 Warning: Rule R10 (two chains always have the same unload signature) was violated 36 times.
 Warning: Rule R11 (X on chain affects observability of other chains) was violated 136 times.
 Compressor rules checking completed: #chains=24, #scanins=4, #scanouts=4, #shifts=10, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin DRC dependent learning...
 Fast-sequential depth results: control=4(1572), observe=0(0), detect=0(0), CPU time=0.00 sec
 DRC dependent learning completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 DRC Summary Report
 ------------------------------------------------------------------------------
 Warning: Rule V6 (unused item) was violated 1 times.
 Warning: Rule S19 (nonscan cell disturb) was violated 23 times.
 Warning: Rule C3 (no latch transparency when clocks off) was violated 1 times.
 Warning: Rule R10 (two chains always have the same unload signature) was violated 36 times.
 Warning: Rule R11 (X on chain affects observability of other chains) was violated 136 times.
 There were 197 violations that occurred during DRC process.
 1 potential clock groups were identified.
 Design rules checking was successful, total CPU time=0.01 sec.
 ------------------------------------------------------------------------------
 reading slack data file ./pt/slacks/occ_bypass/async_fifo_TM4.slack.
 4992 faults were added to fault list.
 The max tmgn for small delay defect faults has been set to 2.2598
 
 ATPG performed for transition fault model using internal pattern source.
 ----------------------------------------------------------
 #patterns     #faults     #ATPG faults  test      process
 stored     detect/active  red/au/abort  coverage  CPU time
 ---------  -------------  ------------  --------  --------
 Begin deterministic ATPG: #collapsed_faults=2873, abort_limit=10...
 Optimized clock launch transition fault ATPG is enabled.
 2 out of 7 timing exceptions are optimized.
 32           1145   1680         0/1/2    51.23%      0.06
 64            563   1115         0/3/2    62.55%      0.19
 96            352    760         0/6/2    69.07%      0.25
 128           215    537        0/14/2    73.09%      0.30
 Local redundancy analysis results: #redundant_faults=0, CPU_time=0.00 sec
 157           112    402        0/37/2    75.22%      0.34
 184            72    313        0/54/2    76.67%      0.37
 207            38    268        0/61/2    77.43%      0.39
 Pattern merging terminated due to failure to achieve minimum merges per pass (10).
 231            47    214        0/68/2    78.40%      0.41
 238             7    183        0/92/2    78.52%      0.43
 Compressor unload adjustment completed: #patterns_adjusted=238, #patterns_added=1, CPU time=0.00 sec.
 
    Collapsed Transition Fault Summary Report
 -----------------------------------------------
 fault class                     code   #faults
 ------------------------------  ----  ---------
 Detected                         DT       3904
   detected_by_simulation         DS       (989)
   detected_by_implication        DI      (1240)
   transition-partially_detected   TP      (1675)
 Possibly detected                PT          0
 Undetectable                     UD         20
   undetectable-tied              UT        (18)
   undetectable-redundant         UR         (2)
 ATPG untestable                  AU        998
   atpg_untestable-not_detected   AN       (998)
 Not detected                     ND         70
   not-observed                   NO        (70)
 -----------------------------------------------
 total faults                              4992
 test coverage                            78.52%
 fault coverage                           78.21%
 -----------------------------------------------
            Pattern Summary Report
 -----------------------------------------------
 #internal patterns                         239
     #basic_scan patterns                     1
     #fast_sequential patterns              238
          # 2-cycle patterns                238
          # 1-load patterns                 238
 -----------------------------------------------
            CPU Usage Summary Report
 -----------------------------------------------
 Total CPU time                            0.43
 -----------------------------------------------
 Write faults completed: 4992 faults were written into file "./faults/occ_bypass/TM4/trans_sdd.flt".
#-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-#
#									#
#		*** common script for all faults ***			#
#		1) generate required reports				#
#		2) write test patterns					#
#		3) write testbenches for pattern validation		#
#		4) write images for post testing diagnosis		#
#									#
#-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-#
#------------------------------------------------------------------------
# 01 _ Generate ATPG Summaries and Reports
#------------------------------------------------------------------------
if { ! [file exist ./reports/${occ_mode}/${fault}/${mode}] } 	{ exec mkdir -p ./reports/${occ_mode}/${fault}/${mode} }
# reports setting
set_faults -pt_credit 0 -au_credit 0
set_faults -summary verbose -fault_coverage -report collapsed
 Warning: Unused gate deletion affects fault coverage calculation. (M245)
set_patterns -histogram_summary
set_faults -fault_coverage
 Warning: Unused gate deletion affects fault coverage calculation. (M245)
# report coverage
report_summaries >  ./reports/${occ_mode}/${fault}/${mode}/01_coverage.rpt
# report drc violations
report_violations -all >  ./reports/${occ_mode}/${fault}/${mode}/02_drc_violations.rpt
# report not detected faults
report_faults -class nd >  ./reports/${occ_mode}/${fault}/${mode}/03_nd_faults.rpt
# report_clocks
report_clocks -intclocks  >  ./reports/${occ_mode}/${fault}/${mode}/clocks.rpt
report_clocks -pllclocks >>  ./reports/${occ_mode}/${fault}/${mode}/clocks.rpt
report_clocks -matrix    >>  ./reports/${occ_mode}/${fault}/${mode}/clocks.rpt
#------------------------------------------------------------------------
# 02 _ Write Image File for Later Post_Testing Diagnosis
#------------------------------------------------------------------------
if { ! [file exist ./imgs/${occ_mode}/${fault}] } 	{ exec mkdir -p ./imgs/${occ_mode}/${fault} }
write_image ./imgs/${occ_mode}/${fault}/${top_design}_${mode}.img.gz 	-compress gzip -replace -violations 
 End write image: #bytes=148066, CPU time=0.05 sec.
#------------------------------------------------------------------------
# 03 _ Write ATPG Patterns
#------------------------------------------------------------------------
if { ! [file exist ./patterns/${occ_mode}/${fault}/gzip] } { exec mkdir -p ./patterns/${occ_mode}/${fault}/gzip }
if { ! [file exist ./patterns/${occ_mode}/${fault}/stil] } { exec mkdir -p ./patterns/${occ_mode}/${fault}/stil }
write_patterns ./patterns/${occ_mode}/${fault}/stil/${top_design}_${mode}.stil  	-format stil -unified_stil_flow -replace
 Patterns written reference 959 V statements, generating 3119 test cycles
 End writing file 'async_fifo_TM4.stil' with 239 patterns, File_size = 147515, CPU_time = 0.0 sec.
write_patterns ./patterns/${occ_mode}/${fault}/gzip/${top_design}_${mode}_pats.gz 	-format binary -compress gzip -replace
 End writing file 'async_fifo_TM4_pats.gz' with 239 patterns, File_size = 9808, CPU_time = 0.0 sec.
#------------------------------------------------------------------------
# 04 _ Save simulation testbench
#------------------------------------------------------------------------
if {! [file exist ./max_sim/logs]} {exec mkdir -p ./max_sim/logs }
if {! [file exist ./max_sim/parallel/${occ_mode}/${fault}/${mode}]} 	{exec mkdir -p ./max_sim/parallel/${occ_mode}/${fault}/${mode} }
if {! [file exist ./max_sim/serial/${occ_mode}/${fault}/${mode}]} 	{exec mkdir -p ./max_sim/serial/${occ_mode}/${fault}/${mode} }
# parallel simulation testbench 
write_testbench -input ./patterns/${occ_mode}/${fault}/stil/${top_design}_${mode}.stil 	-output ./max_sim/parallel/${occ_mode}/${fault}/${mode}/pat_parallel_tb 	-parameter {-parallel -replace -log ./max_sim/logs/pat_parallel_tb.log} 
 Executing 'stil2verilog'...
# parallel simulation testbench with back annotated delay
write_testbench -input ./patterns/${occ_mode}/${fault}/stil/${top_design}_${mode}.stil 	-output ./max_sim/serial/${occ_mode}/${fault}/${mode}/pat_serial_tb 	-parameter {-serial -replace 	-log ./max_sim/logs/pat_serial_tb.log -sdf_file ../pt/sdf/async_fifo.sdf} 
 Executing 'stil2verilog'...
 Warning: Internal pattern set is now deleted. (M133)
 Warning: Current simulation model is now deleted. (M39)
exit
