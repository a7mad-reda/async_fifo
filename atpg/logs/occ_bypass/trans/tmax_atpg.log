 Begin reading netlist ( ../libs/mw_lib/tmax/libs.v.gz )...
 End parsing Verilog file ../libs/mw_lib/tmax/libs.v.gz with 0 errors.
 End reading netlist: #modules=1005, top=pv0a, #lines=10922, CPU_time=0.03 sec, Memory=2MB
 Begin reading netlist ( ../syn/mapped_scan/async_fifo.v )...
 End parsing Verilog file ../syn/mapped_scan/async_fifo.v with 0 errors.
 End reading netlist: #modules=26, top=async_fifo, #lines=1600, CPU_time=0.01 sec, Memory=1MB
#------------------------------------------------------------------------
# 02 _ Build ATPG Design Model
#------------------------------------------------------------------------
run_build_model  $top_design
 ------------------------------------------------------------------------------
 Begin build model for topcut = async_fifo ...
 ------------------------------------------------------------------------------
 There were 2966 primitives and 2 faultable pins removed during model optimizations
 Warning: Rule B7 (undriven module output pin) was violated 16 times.
 Warning: Rule B8 (unconnected module input pin) was violated 10 times.
 Warning: Rule B9 (undriven module internal net) was violated 12 times.
 Warning: Rule B10 (unconnected module internal net) was violated 34 times.
 End build model: #primitives=1607, CPU_time=0.02 sec, Memory=1MB
 ------------------------------------------------------------------------------
 Begin learning analyses...
 End learning analyses, total learning CPU time=0.02 sec.
 ------------------------------------------------------------------------------
report_modules -summary >  ./reports/${occ_mode}/${fault}/02_build.rpt
report_modules -errors  >> ./reports/${occ_mode}/${fault}/02_build.rpt

Reading SDC version 2.1...


Summary of unsupported constraints:
 Information: Ignored 1 unsupported 'set_units' constraint. (SDC-4)

 Information: Ignored 4 unsupported 'set_clock_transition' constraints. (SDC-4)

 Information: Ignored 1 unsupported 'set_operating_conditions' constraint. (SDC-4)

 Information: Ignored 1 unsupported 'get_libs' constraint. (SDC-4)

 End read_sdc: #false_paths:5 #multicycle paths:0 #disable_timing:0 #clk_groups:1
               #clks:2 #generated clks:0 #Case Stmt:9
 ------------------------------------------------------------------------------
 Begin scan design rules checking...
 ------------------------------------------------------------------------------
 Begin reading test protocol file ./occ_bypass_protocols/async_fifo_TM1.spf...
 End parsing STIL file ./occ_bypass_protocols/async_fifo_TM1.spf with 0 errors.
 Test protocol file reading completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin simulating test protocol procedures...
 Nonscan cell constant value results: #constant0 = 2, #constant1 = 2
 Nonscan cell load value results    : #load0 = 4, #load1 = 2
 Test protocol simulation completed, CPU time=0.01 sec.
 ------------------------------------------------------------------------------
 Begin scan chain operation checking...
 Chain 1 successfully traced with 8 scan_cells.
 Chain 2 successfully traced with 8 scan_cells.
 Chain 3 successfully traced with 153 scan_cells.
 Chain 4 successfully traced with 24 scan_cells.
 Warning: Rule S19 (nonscan cell disturb) was violated 23 times.
 Scan chain operation checking completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin clock rules checking...
 Warning: Rule C3 (no latch transparency when clocks off) was violated 1 times.
 Clock rules checking completed, CPU time=0.00 sec.
 The following clocks were identified as groupable with clock wclk (0).
    rclk (12)
 Clock grouping results: #pairs=3, #groups=1, #serial_pairs=2, #disturbed_pairs=1, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin nonscan rules checking...
 Nonscan cell summary: #DFF=22  #DLAT=6  #RAM_outs=0  tla_usage_type=hot_clock_tla
 Nonscan behavior:  #C0=2  #C1=2  #TLA=1  #L0=2  #LE=20  #LS=1
 Nonscan rules checking completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin DRC dependent learning...
 Fast-sequential depth results: control=4(1572), observe=0(0), detect=0(0), CPU time=0.00 sec
 DRC dependent learning completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 DRC Summary Report
 ------------------------------------------------------------------------------
 Warning: Rule S19 (nonscan cell disturb) was violated 23 times.
 Warning: Rule C3 (no latch transparency when clocks off) was violated 1 times.
 There were 24 violations that occurred during DRC process.
 1 potential clock groups were identified.
 Design rules checking was successful, total CPU time=0.01 sec.
 ------------------------------------------------------------------------------
 reading slack data file ./pt/slacks/occ_bypass/async_fifo_TM1.slack.
 354 faults were added to nofault list in module async_fifo_SCCOMP_DECOMPRESSOR.
 100 faults were added to nofault list in module async_fifo_SCCOMP_COMPRESSOR.
 5654 faults were added to fault list.
 
 ATPG performed for transition fault model using internal pattern source.
 ----------------------------------------------------------
 #patterns     #faults     #ATPG faults  test      process
 stored     detect/active  red/au/abort  coverage  CPU time
 ---------  -------------  ------------  --------  --------
 Begin deterministic ATPG: #uncollapsed_faults=3554, abort_limit=10...
 Optimized clock launch transition fault ATPG is enabled.
 2 out of 7 timing exceptions are optimized.
 32           1249   2284         0/1/0    56.23%      0.04
 64            448   1834         0/3/0    66.65%      0.13
 96            243   1586         0/8/1    70.87%      0.21
 Local redundancy analysis results: #redundant_faults=0, CPU_time=0.00 sec
 127           146   1411        0/35/1    73.66%      0.27
 155            91   1309        0/44/1    74.80%      0.31
 183            77   1223        0/51/1    75.97%      0.33
 211            72   1144        0/56/1    77.16%      0.35
 Pattern merging terminated due to failure to achieve minimum merges per pass (10).
 240            48   1093        0/59/1    77.99%      0.37
 267            28   1061        0/63/1    78.49%      0.39
 269             2   1028        0/90/1    78.52%      0.41
 
   Uncollapsed Transition Fault Summary Report
 -----------------------------------------------
 fault class                     code   #faults
 ------------------------------  ----  ---------
 Detected                         DT       4424
 Possibly detected                PT          0
 Undetectable                     UD         20
 ATPG untestable                  AU       1210
 Not detected                     ND          0
 -----------------------------------------------
 total faults                              5654
 test coverage                            78.52%
 -----------------------------------------------
            Pattern Summary Report
 -----------------------------------------------
 #internal patterns                         269
     #basic_scan patterns                     1
     #fast_sequential patterns              268
 -----------------------------------------------
            CPU Usage Summary Report
 -----------------------------------------------
 Total CPU time                            0.42
 -----------------------------------------------
 Write faults completed: 5654 faults were written into file "./faults/occ_bypass/TM1/trans.flt".
#-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-#
#									#
#		*** common script for all faults ***			#
#		1) generate required reports				#
#		2) write test patterns					#
#		3) write testbenches for pattern validation		#
#		4) write images for post testing diagnosis		#
#									#
#-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-#
#------------------------------------------------------------------------
# 01 _ Generate ATPG Summaries and Reports
#------------------------------------------------------------------------
if { ! [file exist ./reports/${occ_mode}/${fault}/${mode}] } 	{ exec mkdir -p ./reports/${occ_mode}/${fault}/${mode} }
# reports setting
set_faults -pt_credit 0 -au_credit 0
set_faults -summary verbose -fault_coverage -report collapsed
 Warning: Unused gate deletion affects fault coverage calculation. (M245)
set_patterns -histogram_summary
set_faults -fault_coverage
 Warning: Unused gate deletion affects fault coverage calculation. (M245)
# report coverage
report_summaries >  ./reports/${occ_mode}/${fault}/${mode}/01_coverage.rpt
# report drc violations
report_violations -all >  ./reports/${occ_mode}/${fault}/${mode}/02_drc_violations.rpt
# report not detected faults
report_faults -class nd >  ./reports/${occ_mode}/${fault}/${mode}/03_nd_faults.rpt
# report_clocks
report_clocks -intclocks  >  ./reports/${occ_mode}/${fault}/${mode}/clocks.rpt
report_clocks -pllclocks >>  ./reports/${occ_mode}/${fault}/${mode}/clocks.rpt
report_clocks -matrix    >>  ./reports/${occ_mode}/${fault}/${mode}/clocks.rpt
#------------------------------------------------------------------------
# 02 _ Write Image File for Later Post_Testing Diagnosis
#------------------------------------------------------------------------
if { ! [file exist ./imgs/${occ_mode}/${fault}] } 	{ exec mkdir -p ./imgs/${occ_mode}/${fault} }
write_image ./imgs/${occ_mode}/${fault}/${top_design}_${mode}.img.gz 	-compress gzip -replace -violations 
 End write image: #bytes=145971, CPU time=0.05 sec.
#------------------------------------------------------------------------
# 03 _ Write ATPG Patterns
#------------------------------------------------------------------------
if { ! [file exist ./patterns/${occ_mode}/${fault}/gzip] } { exec mkdir -p ./patterns/${occ_mode}/${fault}/gzip }
if { ! [file exist ./patterns/${occ_mode}/${fault}/stil] } { exec mkdir -p ./patterns/${occ_mode}/${fault}/stil }
write_patterns ./patterns/${occ_mode}/${fault}/stil/${top_design}_${mode}.stil  	-format stil -unified_stil_flow -replace
 Patterns written reference 1079 V statements, generating 42119 test cycles
 End writing file 'async_fifo_TM1.stil' with 269 patterns, File_size = 236441, CPU_time = 0.0 sec.
write_patterns ./patterns/${occ_mode}/${fault}/gzip/${top_design}_${mode}_pats.gz 	-format binary -compress gzip -replace
 End writing file 'async_fifo_TM1_pats.gz' with 269 patterns, File_size = 19363, CPU_time = 0.0 sec.
#------------------------------------------------------------------------
# 04 _ Save simulation testbench
#------------------------------------------------------------------------
if {! [file exist ./max_sim/logs]} {exec mkdir -p ./max_sim/logs }
if {! [file exist ./max_sim/parallel/${occ_mode}/${fault}/${mode}]} 	{exec mkdir -p ./max_sim/parallel/${occ_mode}/${fault}/${mode} }
if {! [file exist ./max_sim/serial/${occ_mode}/${fault}/${mode}]} 	{exec mkdir -p ./max_sim/serial/${occ_mode}/${fault}/${mode} }
# parallel simulation testbench 
write_testbench -input ./patterns/${occ_mode}/${fault}/stil/${top_design}_${mode}.stil 	-output ./max_sim/parallel/${occ_mode}/${fault}/${mode}/pat_parallel_tb 	-parameter {-parallel -replace -log ./max_sim/logs/pat_parallel_tb.log} 
 Executing 'stil2verilog'...
# parallel simulation testbench with back annotated delay
write_testbench -input ./patterns/${occ_mode}/${fault}/stil/${top_design}_${mode}.stil 	-output ./max_sim/serial/${occ_mode}/${fault}/${mode}/pat_serial_tb 	-parameter {-serial -replace 	-log ./max_sim/logs/pat_serial_tb.log -sdf_file ../pt/sdf/async_fifo.sdf} 
 Executing 'stil2verilog'...
 Warning: Internal pattern set is now deleted. (M133)
 Warning: Current simulation model is now deleted. (M39)
#-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-#
#									#
#		*** common script for all faults ***			#
#		1) read design and simualtion library			#
#		2) build test model 					#
#									#
#-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-#
#------------------------------------------------------------------------
# 00 _ Save TetraMax Transcript to Log File
#------------------------------------------------------------------------
if { $mode == {TM1} } { 

if { ! [file exist ./logs/${occ_mode}/${fault}] } 	{ exec mkdir -p ./logs/${occ_mode}/${fault} }

set_messages -log ./logs/${occ_mode}/${fault}/tmax_atpg.log -replace  

#------------------------------------------------------------------------
# 01 _ Read Libraries and Design
#------------------------------------------------------------------------
if { ! [file exist ./reports/${occ_mode}/${fault}] } 	{ exec mkdir -p ./reports/${occ_mode}/${fault} }

read_netlist ../libs/mw_lib/tmax/libs.v.gz
read_netlist ../syn/mapped_scan/${top_design}.v

report_modules -undefined > ./reports/${occ_mode}/${fault}/01_read.rpt

}
#------------------------------------------------------------------------
# 02 _ Build ATPG Design Model
#------------------------------------------------------------------------
run_build_model  $top_design
 ------------------------------------------------------------------------------
 Begin build model for topcut = async_fifo ...
 ------------------------------------------------------------------------------
 There were 2966 primitives and 2 faultable pins removed during model optimizations
 Warning: Rule B7 (undriven module output pin) was violated 16 times.
 Warning: Rule B8 (unconnected module input pin) was violated 10 times.
 Warning: Rule B9 (undriven module internal net) was violated 12 times.
 Warning: Rule B10 (unconnected module internal net) was violated 34 times.
 End build model: #primitives=1607, CPU_time=0.03 sec, Memory=1MB
 ------------------------------------------------------------------------------
 Begin learning analyses...
 End learning analyses, total learning CPU time=0.01 sec.
 ------------------------------------------------------------------------------
report_modules -summary >  ./reports/${occ_mode}/${fault}/02_build.rpt
report_modules -errors  >> ./reports/${occ_mode}/${fault}/02_build.rpt

Reading SDC version 2.1...


Summary of unsupported constraints:
 Information: Ignored 1 unsupported 'set_units' constraint. (SDC-4)

 Information: Ignored 4 unsupported 'set_clock_transition' constraints. (SDC-4)

 Information: Ignored 1 unsupported 'set_operating_conditions' constraint. (SDC-4)

 Information: Ignored 1 unsupported 'get_libs' constraint. (SDC-4)

 End read_sdc: #false_paths:5 #multicycle paths:0 #disable_timing:0 #clk_groups:1
               #clks:2 #generated clks:0 #Case Stmt:9
 ------------------------------------------------------------------------------
 Begin scan design rules checking...
 ------------------------------------------------------------------------------
 Begin reading test protocol file ./occ_bypass_protocols/async_fifo_TM2.spf...
 End parsing STIL file ./occ_bypass_protocols/async_fifo_TM2.spf with 0 errors.
 Test protocol file reading completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin simulating test protocol procedures...
 Nonscan cell constant value results: #constant0 = 2, #constant1 = 2
 Nonscan cell load value results    : #load0 = 4, #load1 = 2
 Test protocol simulation completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin scan chain operation checking...
 Chain 1 successfully traced with 8 scan_cells.
 Chain 2 successfully traced with 8 scan_cells.
 Chain 3 successfully traced with 153 scan_cells.
 Chain 4 successfully traced with 24 scan_cells.
 Warning: Rule S19 (nonscan cell disturb) was violated 23 times.
 Scan chain operation checking completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin clock rules checking...
 Warning: Rule C3 (no latch transparency when clocks off) was violated 1 times.
 Clock rules checking completed, CPU time=0.00 sec.
 The following clocks were identified as groupable with clock wclk (0).
    rclk (12)
 Clock grouping results: #pairs=3, #groups=1, #serial_pairs=2, #disturbed_pairs=1, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin nonscan rules checking...
 Nonscan cell summary: #DFF=22  #DLAT=6  #RAM_outs=0  tla_usage_type=hot_clock_tla
 Nonscan behavior:  #C0=2  #C1=2  #TLA=1  #L0=2  #LE=20  #LS=1
 Nonscan rules checking completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin DRC dependent learning...
 Fast-sequential depth results: control=4(1572), observe=0(0), detect=0(0), CPU time=0.00 sec
 DRC dependent learning completed, CPU time=0.01 sec.
 ------------------------------------------------------------------------------
 DRC Summary Report
 ------------------------------------------------------------------------------
 Warning: Rule S19 (nonscan cell disturb) was violated 23 times.
 Warning: Rule C3 (no latch transparency when clocks off) was violated 1 times.
 There were 24 violations that occurred during DRC process.
 1 potential clock groups were identified.
 Design rules checking was successful, total CPU time=0.01 sec.
 ------------------------------------------------------------------------------
 reading slack data file ./pt/slacks/occ_bypass/async_fifo_TM2.slack.
 354 faults were added to nofault list in module async_fifo_SCCOMP_DECOMPRESSOR.
 100 faults were added to nofault list in module async_fifo_SCCOMP_COMPRESSOR.
 4574 faults were added to fault list.
 
 ATPG performed for transition fault model using internal pattern source.
 ----------------------------------------------------------
 #patterns     #faults     #ATPG faults  test      process
 stored     detect/active  red/au/abort  coverage  CPU time
 ---------  -------------  ------------  --------  --------
 Begin deterministic ATPG: #collapsed_faults=2870, abort_limit=10...
 Optimized clock launch transition fault ATPG is enabled.
 2 out of 7 timing exceptions are optimized.
 32            899   1926         0/1/0    51.98%      0.05
 64            406   1520         0/1/1    64.08%      0.19
 95            255   1263         0/3/2    69.78%      0.27
 126           124   1119        0/23/2    72.49%      0.33
 Local redundancy analysis results: #redundant_faults=0, CPU_time=0.00 sec
 156            74   1030        0/38/2    73.91%      0.37
 184            71    946        0/51/2    75.25%      0.40
 214            74    868        0/55/2    76.68%      0.42
 Pattern merging terminated due to failure to achieve minimum merges per pass (10).
 239            46    818        0/59/2    77.62%      0.44
 258            23    764        0/90/2    78.09%      0.46
 
    Collapsed Transition Fault Summary Report
 -----------------------------------------------
 fault class                     code   #faults
 ------------------------------  ----  ---------
 Detected                         DT       3556
   detected_by_simulation         DS      (1972)
   detected_by_implication        DI       (820)
   transition-partially_detected   TP       (764)
 Possibly detected                PT          0
 Undetectable                     UD         20
   undetectable-tied              UT        (18)
   undetectable-redundant         UR         (2)
 ATPG untestable                  AU        998
   atpg_untestable-not_detected   AN       (998)
 Not detected                     ND          0
 -----------------------------------------------
 total faults                              4574
 test coverage                            78.09%
 fault coverage                           77.74%
 -----------------------------------------------
            Pattern Summary Report
 -----------------------------------------------
 #internal patterns                         258
     #basic_scan patterns                     1
     #fast_sequential patterns              257
          # 2-cycle patterns                257
          # 1-load patterns                 257
 -----------------------------------------------
            CPU Usage Summary Report
 -----------------------------------------------
 Total CPU time                            0.47
 -----------------------------------------------
 Write faults completed: 4574 faults were written into file "./faults/occ_bypass/TM2/trans.flt".
#-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-#
#									#
#		*** common script for all faults ***			#
#		1) generate required reports				#
#		2) write test patterns					#
#		3) write testbenches for pattern validation		#
#		4) write images for post testing diagnosis		#
#									#
#-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-#
#------------------------------------------------------------------------
# 01 _ Generate ATPG Summaries and Reports
#------------------------------------------------------------------------
if { ! [file exist ./reports/${occ_mode}/${fault}/${mode}] } 	{ exec mkdir -p ./reports/${occ_mode}/${fault}/${mode} }
# reports setting
set_faults -pt_credit 0 -au_credit 0
set_faults -summary verbose -fault_coverage -report collapsed
 Warning: Unused gate deletion affects fault coverage calculation. (M245)
set_patterns -histogram_summary
set_faults -fault_coverage
 Warning: Unused gate deletion affects fault coverage calculation. (M245)
# report coverage
report_summaries >  ./reports/${occ_mode}/${fault}/${mode}/01_coverage.rpt
# report drc violations
report_violations -all >  ./reports/${occ_mode}/${fault}/${mode}/02_drc_violations.rpt
# report not detected faults
report_faults -class nd >  ./reports/${occ_mode}/${fault}/${mode}/03_nd_faults.rpt
# report_clocks
report_clocks -intclocks  >  ./reports/${occ_mode}/${fault}/${mode}/clocks.rpt
report_clocks -pllclocks >>  ./reports/${occ_mode}/${fault}/${mode}/clocks.rpt
report_clocks -matrix    >>  ./reports/${occ_mode}/${fault}/${mode}/clocks.rpt
#------------------------------------------------------------------------
# 02 _ Write Image File for Later Post_Testing Diagnosis
#------------------------------------------------------------------------
if { ! [file exist ./imgs/${occ_mode}/${fault}] } 	{ exec mkdir -p ./imgs/${occ_mode}/${fault} }
write_image ./imgs/${occ_mode}/${fault}/${top_design}_${mode}.img.gz 	-compress gzip -replace -violations 
 End write image: #bytes=145985, CPU time=0.05 sec.
#------------------------------------------------------------------------
# 03 _ Write ATPG Patterns
#------------------------------------------------------------------------
if { ! [file exist ./patterns/${occ_mode}/${fault}/gzip] } { exec mkdir -p ./patterns/${occ_mode}/${fault}/gzip }
if { ! [file exist ./patterns/${occ_mode}/${fault}/stil] } { exec mkdir -p ./patterns/${occ_mode}/${fault}/stil }
write_patterns ./patterns/${occ_mode}/${fault}/stil/${top_design}_${mode}.stil  	-format stil -unified_stil_flow -replace
 Patterns written reference 1035 V statements, generating 40403 test cycles
 End writing file 'async_fifo_TM2.stil' with 258 patterns, File_size = 227784, CPU_time = 0.0 sec.
write_patterns ./patterns/${occ_mode}/${fault}/gzip/${top_design}_${mode}_pats.gz 	-format binary -compress gzip -replace
 End writing file 'async_fifo_TM2_pats.gz' with 258 patterns, File_size = 18696, CPU_time = 0.0 sec.
#------------------------------------------------------------------------
# 04 _ Save simulation testbench
#------------------------------------------------------------------------
if {! [file exist ./max_sim/logs]} {exec mkdir -p ./max_sim/logs }
if {! [file exist ./max_sim/parallel/${occ_mode}/${fault}/${mode}]} 	{exec mkdir -p ./max_sim/parallel/${occ_mode}/${fault}/${mode} }
if {! [file exist ./max_sim/serial/${occ_mode}/${fault}/${mode}]} 	{exec mkdir -p ./max_sim/serial/${occ_mode}/${fault}/${mode} }
# parallel simulation testbench 
write_testbench -input ./patterns/${occ_mode}/${fault}/stil/${top_design}_${mode}.stil 	-output ./max_sim/parallel/${occ_mode}/${fault}/${mode}/pat_parallel_tb 	-parameter {-parallel -replace -log ./max_sim/logs/pat_parallel_tb.log} 
 Executing 'stil2verilog'...
# parallel simulation testbench with back annotated delay
write_testbench -input ./patterns/${occ_mode}/${fault}/stil/${top_design}_${mode}.stil 	-output ./max_sim/serial/${occ_mode}/${fault}/${mode}/pat_serial_tb 	-parameter {-serial -replace 	-log ./max_sim/logs/pat_serial_tb.log -sdf_file ../pt/sdf/async_fifo.sdf} 
 Executing 'stil2verilog'...
 Warning: Internal pattern set is now deleted. (M133)
 Warning: Current simulation model is now deleted. (M39)
#-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-#
#									#
#		*** common script for all faults ***			#
#		1) read design and simualtion library			#
#		2) build test model 					#
#									#
#-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-#
#------------------------------------------------------------------------
# 00 _ Save TetraMax Transcript to Log File
#------------------------------------------------------------------------
if { $mode == {TM1} } { 

if { ! [file exist ./logs/${occ_mode}/${fault}] } 	{ exec mkdir -p ./logs/${occ_mode}/${fault} }

set_messages -log ./logs/${occ_mode}/${fault}/tmax_atpg.log -replace  

#------------------------------------------------------------------------
# 01 _ Read Libraries and Design
#------------------------------------------------------------------------
if { ! [file exist ./reports/${occ_mode}/${fault}] } 	{ exec mkdir -p ./reports/${occ_mode}/${fault} }

read_netlist ../libs/mw_lib/tmax/libs.v.gz
read_netlist ../syn/mapped_scan/${top_design}.v

report_modules -undefined > ./reports/${occ_mode}/${fault}/01_read.rpt

}
#------------------------------------------------------------------------
# 02 _ Build ATPG Design Model
#------------------------------------------------------------------------
run_build_model  $top_design
 ------------------------------------------------------------------------------
 Begin build model for topcut = async_fifo ...
 ------------------------------------------------------------------------------
 There were 2966 primitives and 2 faultable pins removed during model optimizations
 Warning: Rule B7 (undriven module output pin) was violated 16 times.
 Warning: Rule B8 (unconnected module input pin) was violated 10 times.
 Warning: Rule B9 (undriven module internal net) was violated 12 times.
 Warning: Rule B10 (unconnected module internal net) was violated 34 times.
 End build model: #primitives=1607, CPU_time=0.02 sec, Memory=1MB
 ------------------------------------------------------------------------------
 Begin learning analyses...
 End learning analyses, total learning CPU time=0.02 sec.
 ------------------------------------------------------------------------------
report_modules -summary >  ./reports/${occ_mode}/${fault}/02_build.rpt
report_modules -errors  >> ./reports/${occ_mode}/${fault}/02_build.rpt

Reading SDC version 2.1...


Summary of unsupported constraints:
 Information: Ignored 1 unsupported 'set_units' constraint. (SDC-4)

 Information: Ignored 4 unsupported 'set_clock_transition' constraints. (SDC-4)

 Information: Ignored 1 unsupported 'set_operating_conditions' constraint. (SDC-4)

 Information: Ignored 1 unsupported 'get_libs' constraint. (SDC-4)

 End read_sdc: #false_paths:5 #multicycle paths:0 #disable_timing:0 #clk_groups:1
               #clks:2 #generated clks:0 #Case Stmt:9
 ------------------------------------------------------------------------------
 Begin scan design rules checking...
 ------------------------------------------------------------------------------
 Begin reading test protocol file ./occ_bypass_protocols/async_fifo_TM3.spf...
 End parsing STIL file ./occ_bypass_protocols/async_fifo_TM3.spf with 0 errors.
 Test protocol file reading completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin simulating test protocol procedures...
 Nonscan cell constant value results: #constant0 = 2, #constant1 = 2
 Nonscan cell load value results    : #load0 = 4, #load1 = 2
 Test protocol simulation completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin scan chain operation checking...
 Chain 1 successfully traced with 193 scan_cells.
 Warning: Rule S19 (nonscan cell disturb) was violated 22 times.
 Warning: Rule S22 (multiply clocked scan chain) was violated 1 times.
 Warning: Rule S29 (invalid dependent slave operation) was violated 1 times.
 Scan chain operation checking completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin clock rules checking...
 Clock rules checking completed, CPU time=0.00 sec.
 The following clocks were identified as groupable with clock wclk (0).
    rclk (12)
 Clock grouping results: #pairs=3, #groups=1, #serial_pairs=2, #disturbed_pairs=1, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin nonscan rules checking...
 Nonscan cell summary: #DFF=22  #DLAT=4  #RAM_outs=0  tla_usage_type=hot_clock_tla
 Nonscan behavior:  #C0=2  #C1=2  #L0=2  #LE=20
 Nonscan rules checking completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin DRC dependent learning...
 Fast-sequential depth results: control=4(1572), observe=0(0), detect=0(0), CPU time=0.00 sec
 DRC dependent learning completed, CPU time=0.01 sec.
 ------------------------------------------------------------------------------
 DRC Summary Report
 ------------------------------------------------------------------------------
 Warning: Rule S19 (nonscan cell disturb) was violated 22 times.
 Warning: Rule S22 (multiply clocked scan chain) was violated 1 times.
 Warning: Rule S29 (invalid dependent slave operation) was violated 1 times.
 There were 24 violations that occurred during DRC process.
 1 potential clock groups were identified.
 Design rules checking was successful, total CPU time=0.02 sec.
 ------------------------------------------------------------------------------
 reading slack data file ./pt/slacks/occ_bypass/async_fifo_TM3.slack.
 354 faults were added to nofault list in module async_fifo_SCCOMP_DECOMPRESSOR.
 100 faults were added to nofault list in module async_fifo_SCCOMP_COMPRESSOR.
 4578 faults were added to fault list.
 
 ATPG performed for transition fault model using internal pattern source.
 ----------------------------------------------------------
 #patterns     #faults     #ATPG faults  test      process
 stored     detect/active  red/au/abort  coverage  CPU time
 ---------  -------------  ------------  --------  --------
 Begin deterministic ATPG: #collapsed_faults=2879, abort_limit=10...
 Optimized clock launch transition fault ATPG is enabled.
 2 out of 7 timing exceptions are optimized.
 32            898   1933         0/1/0    52.72%      0.03
 64            436   1495         0/3/0    64.96%      0.15
 96            230   1263         0/5/0    69.88%      0.23
 126            97   1158        0/13/0    71.96%      0.28
 Local redundancy analysis results: #redundant_faults=0, CPU_time=0.00 sec
 153            58   1074        0/39/0    73.01%      0.31
 180            61   1002        0/50/0    74.13%      0.34
 211            97    900        0/55/0    75.98%      0.37
 Pattern merging terminated due to failure to achieve minimum merges per pass (10).
 237            48    849        0/58/0    77.01%      0.39
 261            26    819        0/62/0    77.58%      0.41
 267             8    777        0/96/0    77.71%      0.42
 
    Collapsed Transition Fault Summary Report
 -----------------------------------------------
 fault class                     code   #faults
 ------------------------------  ----  ---------
 Detected                         DT       3542
   detected_by_simulation         DS      (1959)
   detected_by_implication        DI       (806)
   transition-partially_detected   TP       (777)
 Possibly detected                PT          0
 Undetectable                     UD         20
   undetectable-tied              UT        (18)
   undetectable-redundant         UR         (2)
 ATPG untestable                  AU       1016
   atpg_untestable-not_detected   AN      (1016)
 Not detected                     ND          0
 -----------------------------------------------
 total faults                              4578
 test coverage                            77.71%
 fault coverage                           77.37%
 -----------------------------------------------
            Pattern Summary Report
 -----------------------------------------------
 #internal patterns                         267
     #basic_scan patterns                     1
     #fast_sequential patterns              266
          # 2-cycle patterns                266
          # 1-load patterns                 266
 -----------------------------------------------
            CPU Usage Summary Report
 -----------------------------------------------
 Total CPU time                            0.43
 -----------------------------------------------
 Write faults completed: 4578 faults were written into file "./faults/occ_bypass/TM3/trans.flt".
#-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-#
#									#
#		*** common script for all faults ***			#
#		1) generate required reports				#
#		2) write test patterns					#
#		3) write testbenches for pattern validation		#
#		4) write images for post testing diagnosis		#
#									#
#-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-#
#------------------------------------------------------------------------
# 01 _ Generate ATPG Summaries and Reports
#------------------------------------------------------------------------
if { ! [file exist ./reports/${occ_mode}/${fault}/${mode}] } 	{ exec mkdir -p ./reports/${occ_mode}/${fault}/${mode} }
# reports setting
set_faults -pt_credit 0 -au_credit 0
set_faults -summary verbose -fault_coverage -report collapsed
 Warning: Unused gate deletion affects fault coverage calculation. (M245)
set_patterns -histogram_summary
set_faults -fault_coverage
 Warning: Unused gate deletion affects fault coverage calculation. (M245)
# report coverage
report_summaries >  ./reports/${occ_mode}/${fault}/${mode}/01_coverage.rpt
# report drc violations
report_violations -all >  ./reports/${occ_mode}/${fault}/${mode}/02_drc_violations.rpt
# report not detected faults
report_faults -class nd >  ./reports/${occ_mode}/${fault}/${mode}/03_nd_faults.rpt
# report_clocks
report_clocks -intclocks  >  ./reports/${occ_mode}/${fault}/${mode}/clocks.rpt
report_clocks -pllclocks >>  ./reports/${occ_mode}/${fault}/${mode}/clocks.rpt
report_clocks -matrix    >>  ./reports/${occ_mode}/${fault}/${mode}/clocks.rpt
#------------------------------------------------------------------------
# 02 _ Write Image File for Later Post_Testing Diagnosis
#------------------------------------------------------------------------
if { ! [file exist ./imgs/${occ_mode}/${fault}] } 	{ exec mkdir -p ./imgs/${occ_mode}/${fault} }
write_image ./imgs/${occ_mode}/${fault}/${top_design}_${mode}.img.gz 	-compress gzip -replace -violations 
 End write image: #bytes=145787, CPU time=0.05 sec.
#------------------------------------------------------------------------
# 03 _ Write ATPG Patterns
#------------------------------------------------------------------------
if { ! [file exist ./patterns/${occ_mode}/${fault}/gzip] } { exec mkdir -p ./patterns/${occ_mode}/${fault}/gzip }
if { ! [file exist ./patterns/${occ_mode}/${fault}/stil] } { exec mkdir -p ./patterns/${occ_mode}/${fault}/stil }
write_patterns ./patterns/${occ_mode}/${fault}/stil/${top_design}_${mode}.stil  	-format stil -unified_stil_flow -replace
 Patterns written reference 1071 V statements, generating 52527 test cycles
 End writing file 'async_fifo_TM3.stil' with 267 patterns, File_size = 208083, CPU_time = 0.0 sec.
write_patterns ./patterns/${occ_mode}/${fault}/gzip/${top_design}_${mode}_pats.gz 	-format binary -compress gzip -replace
 End writing file 'async_fifo_TM3_pats.gz' with 267 patterns, File_size = 19953, CPU_time = 0.0 sec.
#------------------------------------------------------------------------
# 04 _ Save simulation testbench
#------------------------------------------------------------------------
if {! [file exist ./max_sim/logs]} {exec mkdir -p ./max_sim/logs }
if {! [file exist ./max_sim/parallel/${occ_mode}/${fault}/${mode}]} 	{exec mkdir -p ./max_sim/parallel/${occ_mode}/${fault}/${mode} }
if {! [file exist ./max_sim/serial/${occ_mode}/${fault}/${mode}]} 	{exec mkdir -p ./max_sim/serial/${occ_mode}/${fault}/${mode} }
# parallel simulation testbench 
write_testbench -input ./patterns/${occ_mode}/${fault}/stil/${top_design}_${mode}.stil 	-output ./max_sim/parallel/${occ_mode}/${fault}/${mode}/pat_parallel_tb 	-parameter {-parallel -replace -log ./max_sim/logs/pat_parallel_tb.log} 
 Executing 'stil2verilog'...
# parallel simulation testbench with back annotated delay
write_testbench -input ./patterns/${occ_mode}/${fault}/stil/${top_design}_${mode}.stil 	-output ./max_sim/serial/${occ_mode}/${fault}/${mode}/pat_serial_tb 	-parameter {-serial -replace 	-log ./max_sim/logs/pat_serial_tb.log -sdf_file ../pt/sdf/async_fifo.sdf} 
 Executing 'stil2verilog'...
 Warning: Internal pattern set is now deleted. (M133)
 Warning: Current simulation model is now deleted. (M39)
#-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-#
#									#
#		*** common script for all faults ***			#
#		1) read design and simualtion library			#
#		2) build test model 					#
#									#
#-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-#
#------------------------------------------------------------------------
# 00 _ Save TetraMax Transcript to Log File
#------------------------------------------------------------------------
if { $mode == {TM1} } { 

if { ! [file exist ./logs/${occ_mode}/${fault}] } 	{ exec mkdir -p ./logs/${occ_mode}/${fault} }

set_messages -log ./logs/${occ_mode}/${fault}/tmax_atpg.log -replace  

#------------------------------------------------------------------------
# 01 _ Read Libraries and Design
#------------------------------------------------------------------------
if { ! [file exist ./reports/${occ_mode}/${fault}] } 	{ exec mkdir -p ./reports/${occ_mode}/${fault} }

read_netlist ../libs/mw_lib/tmax/libs.v.gz
read_netlist ../syn/mapped_scan/${top_design}.v

report_modules -undefined > ./reports/${occ_mode}/${fault}/01_read.rpt

}
#------------------------------------------------------------------------
# 02 _ Build ATPG Design Model
#------------------------------------------------------------------------
run_build_model  $top_design
 ------------------------------------------------------------------------------
 Begin build model for topcut = async_fifo ...
 ------------------------------------------------------------------------------
 There were 2966 primitives and 2 faultable pins removed during model optimizations
 Warning: Rule B7 (undriven module output pin) was violated 16 times.
 Warning: Rule B8 (unconnected module input pin) was violated 10 times.
 Warning: Rule B9 (undriven module internal net) was violated 12 times.
 Warning: Rule B10 (unconnected module internal net) was violated 34 times.
 End build model: #primitives=1607, CPU_time=0.04 sec, Memory=1MB
 ------------------------------------------------------------------------------
 Begin learning analyses...
 End learning analyses, total learning CPU time=0.02 sec.
 ------------------------------------------------------------------------------
report_modules -summary >  ./reports/${occ_mode}/${fault}/02_build.rpt
report_modules -errors  >> ./reports/${occ_mode}/${fault}/02_build.rpt

Reading SDC version 2.1...


Summary of unsupported constraints:
 Information: Ignored 1 unsupported 'set_units' constraint. (SDC-4)

 Information: Ignored 4 unsupported 'set_clock_transition' constraints. (SDC-4)

 Information: Ignored 1 unsupported 'set_operating_conditions' constraint. (SDC-4)

 Information: Ignored 1 unsupported 'get_libs' constraint. (SDC-4)

 End read_sdc: #false_paths:5 #multicycle paths:0 #disable_timing:0 #clk_groups:1
               #clks:2 #generated clks:0 #Case Stmt:9
 ------------------------------------------------------------------------------
 Begin scan design rules checking...
 ------------------------------------------------------------------------------
 Begin reading test protocol file ./occ_bypass_protocols/async_fifo_TM4.spf...
 Warning: Rule V6 (unused item) was violated 1 times.
 End parsing STIL file ./occ_bypass_protocols/async_fifo_TM4.spf with 0 errors.
 Test protocol file reading completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin simulating test protocol procedures...
 Nonscan cell constant value results: #constant0 = 2, #constant1 = 2
 Nonscan cell load value results    : #load0 = 4, #load1 = 2
 Test protocol simulation completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin compressor chain I/O checking: #undefined_io=48 ...
 End compressor chain output checking: #resolved=0, #ambiguous=24, #failed=0, #undefined_inputs=24
 Begin scan chain operation checking...
 Chain 1 successfully traced with 8 scan_cells.
 Chain 2 successfully traced with 8 scan_cells.
 Chain 3 successfully traced with 9 scan_cells.
 Chain 4 successfully traced with 8 scan_cells.
 Chain 5 successfully traced with 8 scan_cells.
 Chain 6 successfully traced with 8 scan_cells.
 Chain 7 successfully traced with 8 scan_cells.
 Chain 8 successfully traced with 8 scan_cells.
 Chain 9 successfully traced with 8 scan_cells.
 Chain 10 successfully traced with 8 scan_cells.
 Chain 11 successfully traced with 8 scan_cells.
 Chain 12 successfully traced with 8 scan_cells.
 Chain 13 successfully traced with 8 scan_cells.
 Chain 14 successfully traced with 8 scan_cells.
 Chain 15 successfully traced with 8 scan_cells.
 Chain 16 successfully traced with 8 scan_cells.
 Chain 17 successfully traced with 8 scan_cells.
 Chain 18 successfully traced with 8 scan_cells.
 Chain 19 successfully traced with 8 scan_cells.
 Chain 20 successfully traced with 8 scan_cells.
 Chain 21 successfully traced with 8 scan_cells.
 Chain 22 successfully traced with 8 scan_cells.
 Chain 23 successfully traced with 8 scan_cells.
 Chain 24 successfully traced with 8 scan_cells.
 End ambiguous chain resolution: #resolved=24, #ambiguous=0, #failed=0
 Warning: Rule S19 (nonscan cell disturb) was violated 23 times.
 Scan chain operation checking completed, CPU time=0.01 sec.
 ------------------------------------------------------------------------------
 Begin clock rules checking...
 Warning: Rule C3 (no latch transparency when clocks off) was violated 1 times.
 Clock rules checking completed, CPU time=0.00 sec.
 The following clocks were identified as groupable with clock wclk (0).
    rclk (12)
 Clock grouping results: #pairs=3, #groups=1, #serial_pairs=2, #disturbed_pairs=1, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin nonscan rules checking...
 Nonscan cell summary: #DFF=22  #DLAT=6  #RAM_outs=0  tla_usage_type=hot_clock_tla
 Nonscan behavior:  #C0=2  #C1=2  #TLA=1  #L0=2  #LE=20  #LS=1
 Nonscan rules checking completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin compressor rules checking...
 Warning: Rule R10 (two chains always have the same unload signature) was violated 36 times.
 Warning: Rule R11 (X on chain affects observability of other chains) was violated 136 times.
 Compressor rules checking completed: #chains=24, #scanins=4, #scanouts=4, #shifts=10, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 Begin DRC dependent learning...
 Fast-sequential depth results: control=4(1572), observe=0(0), detect=0(0), CPU time=0.00 sec
 DRC dependent learning completed, CPU time=0.00 sec.
 ------------------------------------------------------------------------------
 DRC Summary Report
 ------------------------------------------------------------------------------
 Warning: Rule V6 (unused item) was violated 1 times.
 Warning: Rule S19 (nonscan cell disturb) was violated 23 times.
 Warning: Rule C3 (no latch transparency when clocks off) was violated 1 times.
 Warning: Rule R10 (two chains always have the same unload signature) was violated 36 times.
 Warning: Rule R11 (X on chain affects observability of other chains) was violated 136 times.
 There were 197 violations that occurred during DRC process.
 1 potential clock groups were identified.
 Design rules checking was successful, total CPU time=0.01 sec.
 ------------------------------------------------------------------------------
 reading slack data file ./pt/slacks/occ_bypass/async_fifo_TM4.slack.
 4992 faults were added to fault list.
 
 ATPG performed for transition fault model using internal pattern source.
 ----------------------------------------------------------
 #patterns     #faults     #ATPG faults  test      process
 stored     detect/active  red/au/abort  coverage  CPU time
 ---------  -------------  ------------  --------  --------
 Begin deterministic ATPG: #collapsed_faults=2873, abort_limit=10...
 Optimized clock launch transition fault ATPG is enabled.
 2 out of 7 timing exceptions are optimized.
 31            706   2119         0/1/0    50.08%      0.08
 63            427   1691         0/2/0    62.19%      0.22
 93            264   1424         0/5/0    68.36%      0.32
 125           130   1286        0/13/0    71.40%      0.38
 Local redundancy analysis results: #redundant_faults=0, CPU_time=0.00 sec
 156            92   1171        0/36/1    73.61%      0.44
 185            74   1083        0/50/1    74.98%      0.48
 214            85    995        0/53/1    76.59%      0.50
 243            51    939        0/58/1    77.61%      0.53
 Pattern merging terminated due to failure to achieve minimum merges per pass (10).
 265            37    897        0/63/1    78.36%      0.56
 282            17    850        0/93/1    78.68%      0.59
 Compressor unload adjustment completed: #patterns_adjusted=282, #patterns_added=1, CPU time=0.00 sec.
 
    Collapsed Transition Fault Summary Report
 -----------------------------------------------
 fault class                     code   #faults
 ------------------------------  ----  ---------
 Detected                         DT       3912
   detected_by_simulation         DS      (1883)
   detected_by_implication        DI      (1240)
   transition-partially_detected   TP       (789)
 Possibly detected                PT          0
 Undetectable                     UD         20
   undetectable-tied              UT        (18)
   undetectable-redundant         UR         (2)
 ATPG untestable                  AU        999
   atpg_untestable-not_detected   AN       (999)
 Not detected                     ND         61
   not-observed                   NO        (61)
 -----------------------------------------------
 total faults                              4992
 test coverage                            78.68%
 fault coverage                           78.37%
 -----------------------------------------------
            Pattern Summary Report
 -----------------------------------------------
 #internal patterns                         283
     #basic_scan patterns                     1
     #fast_sequential patterns              282
          # 2-cycle patterns                282
          # 1-load patterns                 282
 -----------------------------------------------
            CPU Usage Summary Report
 -----------------------------------------------
 Total CPU time                            0.59
 -----------------------------------------------
 Write faults completed: 4992 faults were written into file "./faults/occ_bypass/TM4/trans.flt".
#-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-#
#									#
#		*** common script for all faults ***			#
#		1) generate required reports				#
#		2) write test patterns					#
#		3) write testbenches for pattern validation		#
#		4) write images for post testing diagnosis		#
#									#
#-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-<-->-#
#------------------------------------------------------------------------
# 01 _ Generate ATPG Summaries and Reports
#------------------------------------------------------------------------
if { ! [file exist ./reports/${occ_mode}/${fault}/${mode}] } 	{ exec mkdir -p ./reports/${occ_mode}/${fault}/${mode} }
# reports setting
set_faults -pt_credit 0 -au_credit 0
set_faults -summary verbose -fault_coverage -report collapsed
 Warning: Unused gate deletion affects fault coverage calculation. (M245)
set_patterns -histogram_summary
set_faults -fault_coverage
 Warning: Unused gate deletion affects fault coverage calculation. (M245)
# report coverage
report_summaries >  ./reports/${occ_mode}/${fault}/${mode}/01_coverage.rpt
# report drc violations
report_violations -all >  ./reports/${occ_mode}/${fault}/${mode}/02_drc_violations.rpt
# report not detected faults
report_faults -class nd >  ./reports/${occ_mode}/${fault}/${mode}/03_nd_faults.rpt
# report_clocks
report_clocks -intclocks  >  ./reports/${occ_mode}/${fault}/${mode}/clocks.rpt
report_clocks -pllclocks >>  ./reports/${occ_mode}/${fault}/${mode}/clocks.rpt
report_clocks -matrix    >>  ./reports/${occ_mode}/${fault}/${mode}/clocks.rpt
#------------------------------------------------------------------------
# 02 _ Write Image File for Later Post_Testing Diagnosis
#------------------------------------------------------------------------
if { ! [file exist ./imgs/${occ_mode}/${fault}] } 	{ exec mkdir -p ./imgs/${occ_mode}/${fault} }
write_image ./imgs/${occ_mode}/${fault}/${top_design}_${mode}.img.gz 	-compress gzip -replace -violations 
 End write image: #bytes=148026, CPU time=0.04 sec.
#------------------------------------------------------------------------
# 03 _ Write ATPG Patterns
#------------------------------------------------------------------------
if { ! [file exist ./patterns/${occ_mode}/${fault}/gzip] } { exec mkdir -p ./patterns/${occ_mode}/${fault}/gzip }
if { ! [file exist ./patterns/${occ_mode}/${fault}/stil] } { exec mkdir -p ./patterns/${occ_mode}/${fault}/stil }
write_patterns ./patterns/${occ_mode}/${fault}/stil/${top_design}_${mode}.stil  	-format stil -unified_stil_flow -replace
 Patterns written reference 1135 V statements, generating 3691 test cycles
 End writing file 'async_fifo_TM4.stil' with 283 patterns, File_size = 168372, CPU_time = 0.0 sec.
write_patterns ./patterns/${occ_mode}/${fault}/gzip/${top_design}_${mode}_pats.gz 	-format binary -compress gzip -replace
 End writing file 'async_fifo_TM4_pats.gz' with 283 patterns, File_size = 11751, CPU_time = 0.0 sec.
#------------------------------------------------------------------------
# 04 _ Save simulation testbench
#------------------------------------------------------------------------
if {! [file exist ./max_sim/logs]} {exec mkdir -p ./max_sim/logs }
if {! [file exist ./max_sim/parallel/${occ_mode}/${fault}/${mode}]} 	{exec mkdir -p ./max_sim/parallel/${occ_mode}/${fault}/${mode} }
if {! [file exist ./max_sim/serial/${occ_mode}/${fault}/${mode}]} 	{exec mkdir -p ./max_sim/serial/${occ_mode}/${fault}/${mode} }
# parallel simulation testbench 
write_testbench -input ./patterns/${occ_mode}/${fault}/stil/${top_design}_${mode}.stil 	-output ./max_sim/parallel/${occ_mode}/${fault}/${mode}/pat_parallel_tb 	-parameter {-parallel -replace -log ./max_sim/logs/pat_parallel_tb.log} 
 Executing 'stil2verilog'...
# parallel simulation testbench with back annotated delay
write_testbench -input ./patterns/${occ_mode}/${fault}/stil/${top_design}_${mode}.stil 	-output ./max_sim/serial/${occ_mode}/${fault}/${mode}/pat_serial_tb 	-parameter {-serial -replace 	-log ./max_sim/logs/pat_serial_tb.log -sdf_file ../pt/sdf/async_fifo.sdf} 
 Executing 'stil2verilog'...
 Warning: Internal pattern set is now deleted. (M133)
 Warning: Current simulation model is now deleted. (M39)
exit
